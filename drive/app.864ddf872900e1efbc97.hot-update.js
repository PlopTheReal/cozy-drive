webpackHotUpdate("app",{

/***/ "./src/drive/web/modules/upload/index.js":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"ADD_TO_UPLOAD_QUEUE\", function() { return ADD_TO_UPLOAD_QUEUE; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"status\", function() { return status; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"queue\", function() { return queue; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"uploadProgress\", function() { return uploadProgress; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"processNextFile\", function() { return processNextFile; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"overwriteFile\", function() { return overwriteFile; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"uploadFilesFromNative\", function() { return uploadFilesFromNative; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"removeFileToUploadQueue\", function() { return removeFileToUploadQueue; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"addToUploadQueue\", function() { return addToUploadQueue; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"purgeUploadQueue\", function() { return purgeUploadQueue; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"onQueueEmpty\", function() { return onQueueEmpty; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"getUploadQueue\", function() { return getUploadQueue; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"getProcessed\", function() { return getProcessed; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"getSuccessful\", function() { return getSuccessful; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"selectors\", function() { return selectors; });\n/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"./node_modules/@babel/runtime/regenerator/index.js\");\n/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(\"./node_modules/@babel/runtime/helpers/asyncToGenerator.js\");\n/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(\"./node_modules/@babel/runtime/helpers/toConsumableArray.js\");\n/* harmony import */ var _babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _babel_runtime_helpers_objectSpread__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(\"./node_modules/@babel/runtime/helpers/objectSpread.js\");\n/* harmony import */ var _babel_runtime_helpers_objectSpread__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_objectSpread__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var redux__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(\"./node_modules/redux/es/index.js\");\n/* harmony import */ var lib_logger__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(\"./src/lib/logger.js\");\n/* harmony import */ var models__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(\"./src/models/index.js\");\n/* harmony import */ var drive_lib_reporter__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(\"./src/drive/lib/reporter.js\");\n/* harmony import */ var drive_constants_config__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(\"./src/drive/constants/config.js\");\n/* harmony import */ var _UploadQueue__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(\"./src/drive/web/modules/upload/UploadQueue.jsx\");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"UploadQueue\", function() { return _UploadQueue__WEBPACK_IMPORTED_MODULE_9__[\"default\"]; });\n\n/* harmony import */ var drive_lib_encryption__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(\"./src/drive/lib/encryption.js\");\n/* harmony import */ var drive_lib_doctypes__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(\"./src/drive/lib/doctypes.js\");\n/* harmony import */ var cozy_client__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(\"./node_modules/cozy-client/dist/index.js\");\n/* harmony import */ var cozy_client__WEBPACK_IMPORTED_MODULE_12___default = /*#__PURE__*/__webpack_require__.n(cozy_client__WEBPACK_IMPORTED_MODULE_12__);\n\n\n\n\n\nfunction _createForOfIteratorHelper(o, allowArrayLike) { var it; if (typeof Symbol === \"undefined\" || o[Symbol.iterator] == null) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = o[Symbol.iterator](); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it.return != null) it.return(); } finally { if (didErr) throw err; } } }; }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\n\n\n\n\n\n\n\n\n\nvar _models$file = cozy_client__WEBPACK_IMPORTED_MODULE_12__[\"models\"].file,\n    doMobileUpload = _models$file.doMobileUpload,\n    readMobileFile = _models$file.readMobileFile,\n    uploadFileWithConflictStrategy = _models$file.uploadFileWithConflictStrategy;\n\nvar SLUG = 'upload';\nvar ADD_TO_UPLOAD_QUEUE = 'ADD_TO_UPLOAD_QUEUE';\nvar UPLOAD_FILE = 'UPLOAD_FILE';\nvar UPLOAD_PROGRESS = 'UPLOAD_PROGRESS';\nvar RECEIVE_UPLOAD_SUCCESS = 'RECEIVE_UPLOAD_SUCCESS';\nvar RECEIVE_UPLOAD_ERROR = 'RECEIVE_UPLOAD_ERROR';\nvar PURGE_UPLOAD_QUEUE = 'PURGE_UPLOAD_QUEUE';\nvar CANCEL = 'cancel';\nvar PENDING = 'pending';\nvar LOADING = 'loading';\nvar CREATED = 'created';\nvar UPDATED = 'updated';\nvar FAILED = 'failed';\nvar CONFLICT = 'conflict';\nvar QUOTA = 'quota';\nvar NETWORK = 'network';\nvar DONE_STATUSES = [CREATED, UPDATED];\nvar ERROR_STATUSES = [CONFLICT, NETWORK, QUOTA];\nvar status = {\n  CANCEL: CANCEL,\n  PENDING: PENDING,\n  LOADING: LOADING,\n  CREATED: CREATED,\n  UPDATED: UPDATED,\n  FAILED: FAILED,\n  CONFLICT: CONFLICT,\n  QUOTA: QUOTA,\n  NETWORK: NETWORK,\n  DONE_STATUSES: DONE_STATUSES,\n  ERROR_STATUSES: ERROR_STATUSES\n};\nvar CONFLICT_ERROR = 409;\n\nvar itemInitialState = function itemInitialState(item) {\n  return _babel_runtime_helpers_objectSpread__WEBPACK_IMPORTED_MODULE_3___default()({}, item, {\n    status: PENDING,\n    progress: null\n  });\n};\n\nvar getStatus = function getStatus(state, action) {\n  switch (action.type) {\n    case UPLOAD_FILE:\n      return LOADING;\n\n    case RECEIVE_UPLOAD_SUCCESS:\n      return action.isUpdate ? UPDATED : CREATED;\n\n    case RECEIVE_UPLOAD_ERROR:\n      return action.status;\n\n    default:\n      return state;\n  }\n};\n\nvar getSpeed = function getSpeed(state, action) {\n  var lastLoaded = state.loaded;\n  var lastUpdated = state.lastUpdated;\n  var now = action.date;\n  var nowLoaded = action.loaded;\n  return (nowLoaded - lastLoaded) / (now - lastUpdated) * 1000;\n};\n\nvar remainingTimes = [];\nvar averageRemainingTime = undefined;\nvar timeout = undefined;\n\nvar getProgress = function getProgress(state, action) {\n  console.log('get progress');\n\n  if (action.type === UPLOAD_PROGRESS) {\n    var speed = state ? getSpeed(state, action) : null;\n    var loaded = action.loaded;\n    var total = action.total;\n    var instantRemainingTime = speed && total && loaded ? (total - loaded) / speed : null;\n    console.log({\n      instantRemainingTime: instantRemainingTime\n    });\n\n    if (!averageRemainingTime) {\n      console.log('set default average remaining time');\n      averageRemainingTime = instantRemainingTime;\n    }\n\n    if (instantRemainingTime) {\n      remainingTimes.push(instantRemainingTime);\n      console.log('push in array');\n    }\n\n    if (!timeout) {\n      console.log('no timeout, j en set un');\n      timeout = setTimeout(function () {\n        console.log('tim out, je calcule');\n\n        averageRemainingTime = function averageRemainingTime(remainingTimes) {\n          return remainingTimes.reduce(function (a, b) {\n            return a + b;\n          }) / remainingTimes.length;\n        };\n\n        console.log({\n          averageRemainingTime: averageRemainingTime\n        });\n        clearTimeout(timeout);\n      }, 1000);\n    }\n\n    return {\n      loaded: loaded,\n      total: total,\n      lastUpdated: action.date,\n      speed: speed,\n      remainingTime: averageRemainingTime\n    };\n  } else if (action.type === RECEIVE_UPLOAD_SUCCESS || action.type === RECEIVE_UPLOAD_ERROR) {\n    return null;\n  } else {\n    return state;\n  }\n};\n\nvar item = function item(state) {\n  var action = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {\n    isUpdate: false\n  };\n  return _babel_runtime_helpers_objectSpread__WEBPACK_IMPORTED_MODULE_3___default()({}, state, {\n    status: getStatus(state.status, action),\n    progress: getProgress(state.progress, action)\n  });\n};\n\nvar queue = function queue() {\n  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n  var action = arguments.length > 1 ? arguments[1] : undefined;\n  console.log('in queue');\n\n  switch (action.type) {\n    case ADD_TO_UPLOAD_QUEUE:\n      return [].concat(_babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_2___default()(state.filter(function (i) {\n        return i.status !== CREATED;\n      })), _babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_2___default()(action.files.map(function (f) {\n        return itemInitialState(f);\n      })));\n\n    case PURGE_UPLOAD_QUEUE:\n      return [];\n\n    case UPLOAD_FILE:\n    case RECEIVE_UPLOAD_SUCCESS:\n    case RECEIVE_UPLOAD_ERROR:\n    case UPLOAD_PROGRESS:\n      console.log('in case');\n      return state.map(function (i) {\n        return i.file.name !== action.file.name ? i : item(i, action);\n      });\n\n    default:\n      return state;\n  }\n};\n/* harmony default export */ __webpack_exports__[\"default\"] = (Object(redux__WEBPACK_IMPORTED_MODULE_4__[\"combineReducers\"])({\n  queue: queue\n}));\nvar uploadProgress = function uploadProgress(file, event, date) {\n  return {\n    type: UPLOAD_PROGRESS,\n    file: file,\n    loaded: event.loaded,\n    total: event.total,\n    date: date || Date.now()\n  };\n};\nvar processNextFile = function processNextFile(fileUploadedCallback, queueCompletedCallback, dirID, sharingState, _ref) {\n  var client = _ref.client,\n      vaultClient = _ref.vaultClient;\n  return /*#__PURE__*/function () {\n    var _ref2 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee(dispatch, getState) {\n      var error, item, file, entry, isDirectory, encryptionKey, newDir, withProgress, uploadedFile, path, _uploadedFile, statusError, _status;\n\n      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              error = null;\n\n              if (client) {\n                _context.next = 3;\n                break;\n              }\n\n              throw new Error('Upload module needs a cozy-client instance to work. This instance should be made available by using the extraArgument function of redux-thunk');\n\n            case 3:\n              item = getUploadQueue(getState()).find(function (i) {\n                return i.status === PENDING;\n              });\n\n              if (item) {\n                _context.next = 6;\n                break;\n              }\n\n              return _context.abrupt(\"return\", dispatch(onQueueEmpty(queueCompletedCallback)));\n\n            case 6:\n              file = item.file, entry = item.entry, isDirectory = item.isDirectory;\n              _context.next = 9;\n              return Object(drive_lib_encryption__WEBPACK_IMPORTED_MODULE_10__[\"getEncryptionKeyFromDirId\"])(client, dirID);\n\n            case 9:\n              encryptionKey = _context.sent;\n              _context.prev = 10;\n              dispatch({\n                type: UPLOAD_FILE,\n                file: file\n              });\n\n              if (!(entry && isDirectory)) {\n                _context.next = 19;\n                break;\n              }\n\n              _context.next = 15;\n              return uploadDirectory(client, entry, dirID, {\n                vaultClient: vaultClient,\n                encryptionKey: encryptionKey\n              });\n\n            case 15:\n              newDir = _context.sent;\n              fileUploadedCallback(newDir);\n              _context.next = 24;\n              break;\n\n            case 19:\n              withProgress = {\n                onUploadProgress: function onUploadProgress(event) {\n                  dispatch(uploadProgress(file, event));\n                }\n              };\n              _context.next = 22;\n              return uploadFile(client, file, dirID, _babel_runtime_helpers_objectSpread__WEBPACK_IMPORTED_MODULE_3___default()({\n                vaultClient: vaultClient,\n                encryptionKey: encryptionKey\n              }, withProgress));\n\n            case 22:\n              uploadedFile = _context.sent;\n              fileUploadedCallback(uploadedFile);\n\n            case 24:\n              dispatch({\n                type: RECEIVE_UPLOAD_SUCCESS,\n                file: file\n              });\n              _context.next = 47;\n              break;\n\n            case 27:\n              _context.prev = 27;\n              _context.t0 = _context[\"catch\"](10);\n              error = _context.t0;\n\n              if (!(_context.t0.status === CONFLICT_ERROR)) {\n                _context.next = 46;\n                break;\n              }\n\n              _context.prev = 31;\n              _context.next = 34;\n              return models__WEBPACK_IMPORTED_MODULE_6__[\"CozyFile\"].getFullpath(dirID, file.name);\n\n            case 34:\n              path = _context.sent;\n              _context.next = 37;\n              return overwriteFile(client, file, path, {\n                onUploadProgress: function onUploadProgress(event) {\n                  dispatch(uploadProgress(file, event));\n                }\n              });\n\n            case 37:\n              _uploadedFile = _context.sent;\n              fileUploadedCallback(_uploadedFile);\n              dispatch({\n                type: RECEIVE_UPLOAD_SUCCESS,\n                file: file,\n                isUpdate: true\n              });\n              error = null;\n              _context.next = 46;\n              break;\n\n            case 43:\n              _context.prev = 43;\n              _context.t1 = _context[\"catch\"](31);\n              error = _context.t1;\n\n            case 46:\n              if (error) {\n                lib_logger__WEBPACK_IMPORTED_MODULE_5__[\"default\"].warn(error);\n                Object(drive_lib_reporter__WEBPACK_IMPORTED_MODULE_7__[\"logException\"])(\"Upload module catches an error when executing processNextFile(): \".concat(error));\n                statusError = {\n                  409: CONFLICT,\n                  413: QUOTA\n                };\n                _status = statusError[error.status] || /Failed to fetch$/.exec(error.toString()) && NETWORK || FAILED;\n                dispatch({\n                  type: RECEIVE_UPLOAD_ERROR,\n                  file: file,\n                  status: _status\n                });\n              }\n\n            case 47:\n              dispatch(processNextFile(fileUploadedCallback, queueCompletedCallback, dirID, sharingState, {\n                client: client,\n                vaultClient: vaultClient\n              }));\n\n            case 48:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[10, 27], [31, 43]]);\n    }));\n\n    return function (_x, _x2) {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n};\n\nvar getFileFromEntry = function getFileFromEntry(entry) {\n  return new Promise(function (resolve) {\n    return entry.file(resolve);\n  });\n};\n\nvar uploadDirectory = /*#__PURE__*/function () {\n  var _ref4 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee3(client, directory, dirID, _ref3) {\n    var vaultClient, encryptionKey, newDir, dirReader;\n    return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee3$(_context3) {\n      while (1) {\n        switch (_context3.prev = _context3.next) {\n          case 0:\n            vaultClient = _ref3.vaultClient, encryptionKey = _ref3.encryptionKey;\n            _context3.next = 3;\n            return createFolder(client, directory.name, dirID);\n\n          case 3:\n            newDir = _context3.sent;\n            dirReader = directory.createReader();\n            return _context3.abrupt(\"return\", new Promise(function (resolve) {\n              var entriesReader = /*#__PURE__*/function () {\n                var _ref5 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee2(entries) {\n                  var i, entry, file;\n                  return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee2$(_context2) {\n                    while (1) {\n                      switch (_context2.prev = _context2.next) {\n                        case 0:\n                          i = 0;\n\n                        case 1:\n                          if (!(i < entries.length)) {\n                            _context2.next = 17;\n                            break;\n                          }\n\n                          entry = entries[i];\n\n                          if (!entry.isFile) {\n                            _context2.next = 11;\n                            break;\n                          }\n\n                          _context2.next = 6;\n                          return getFileFromEntry(entry);\n\n                        case 6:\n                          file = _context2.sent;\n                          _context2.next = 9;\n                          return uploadFile(client, file, newDir.id, {\n                            vaultClient: vaultClient,\n                            encryptionKey: encryptionKey\n                          });\n\n                        case 9:\n                          _context2.next = 14;\n                          break;\n\n                        case 11:\n                          if (!entry.isDirectory) {\n                            _context2.next = 14;\n                            break;\n                          }\n\n                          _context2.next = 14;\n                          return uploadDirectory(client, entry, newDir.id, {\n                            vaultClient: vaultClient,\n                            encryptionKey: encryptionKey\n                          });\n\n                        case 14:\n                          i += 1;\n                          _context2.next = 1;\n                          break;\n\n                        case 17:\n                          resolve(newDir);\n\n                        case 18:\n                        case \"end\":\n                          return _context2.stop();\n                      }\n                    }\n                  }, _callee2);\n                }));\n\n                return function entriesReader(_x7) {\n                  return _ref5.apply(this, arguments);\n                };\n              }();\n\n              dirReader.readEntries(entriesReader);\n            }));\n\n          case 6:\n          case \"end\":\n            return _context3.stop();\n        }\n      }\n    }, _callee3);\n  }));\n\n  return function uploadDirectory(_x3, _x4, _x5, _x6) {\n    return _ref4.apply(this, arguments);\n  };\n}();\n\nvar createFolder = /*#__PURE__*/function () {\n  var _ref6 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee4(client, name, dirID) {\n    var resp;\n    return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee4$(_context4) {\n      while (1) {\n        switch (_context4.prev = _context4.next) {\n          case 0:\n            _context4.next = 2;\n            return client.collection(drive_lib_doctypes__WEBPACK_IMPORTED_MODULE_11__[\"DOCTYPE_FILES\"]).createDirectory({\n              name: name,\n              dirId: dirID\n            });\n\n          case 2:\n            resp = _context4.sent;\n            return _context4.abrupt(\"return\", resp.data);\n\n          case 4:\n          case \"end\":\n            return _context4.stop();\n        }\n      }\n    }, _callee4);\n  }));\n\n  return function createFolder(_x8, _x9, _x10) {\n    return _ref6.apply(this, arguments);\n  };\n}();\n\nvar uploadFile = /*#__PURE__*/function () {\n  var _ref7 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee6(client, file, dirID) {\n    var options,\n        _yield$client$getStac,\n        diskUsage,\n        error,\n        onUploadProgress,\n        encryptionKey,\n        vaultClient,\n        fr,\n        resp,\n        _args6 = arguments;\n\n    return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee6$(_context6) {\n      while (1) {\n        switch (_context6.prev = _context6.next) {\n          case 0:\n            options = _args6.length > 3 && _args6[3] !== undefined ? _args6[3] : {};\n\n            if (!window.chrome) {\n              _context6.next = 11;\n              break;\n            }\n\n            _context6.next = 4;\n            return client.getStackClient().fetchJSON('GET', '/settings/disk-usage');\n\n          case 4:\n            _yield$client$getStac = _context6.sent;\n            diskUsage = _yield$client$getStac.data;\n\n            if (!diskUsage.attributes.quota) {\n              _context6.next = 11;\n              break;\n            }\n\n            if (!(parseInt(diskUsage.attributes.used) + parseInt(file.size) > parseInt(diskUsage.attributes.quota))) {\n              _context6.next = 11;\n              break;\n            }\n\n            error = new Error('Payload Too Large');\n            error.status = 413;\n            throw error;\n\n          case 11:\n            onUploadProgress = options.onUploadProgress, encryptionKey = options.encryptionKey, vaultClient = options.vaultClient;\n\n            if (!(encryptionKey && vaultClient)) {\n              _context6.next = 18;\n              break;\n            }\n\n            // TODO: use web worker\n            fr = new FileReader();\n            fr.onloadend = /*#__PURE__*/_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee5() {\n              return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee5$(_context5) {\n                while (1) {\n                  switch (_context5.prev = _context5.next) {\n                    case 0:\n                      return _context5.abrupt(\"return\", Object(drive_lib_encryption__WEBPACK_IMPORTED_MODULE_10__[\"encryptAndUploadNewFile\"])(client, vaultClient, {\n                        file: fr.result,\n                        encryptionKey: encryptionKey,\n                        fileOptions: {\n                          name: file.name,\n                          dirID: dirID,\n                          onUploadProgress: onUploadProgress\n                        }\n                      }));\n\n                    case 1:\n                    case \"end\":\n                      return _context5.stop();\n                  }\n                }\n              }, _callee5);\n            }));\n            fr.readAsArrayBuffer(file);\n            _context6.next = 22;\n            break;\n\n          case 18:\n            _context6.next = 20;\n            return client.collection(drive_lib_doctypes__WEBPACK_IMPORTED_MODULE_11__[\"DOCTYPE_FILES\"]).createFile(file, {\n              dirId: dirID,\n              onUploadProgress: onUploadProgress\n            });\n\n          case 20:\n            resp = _context6.sent;\n            return _context6.abrupt(\"return\", resp.data);\n\n          case 22:\n          case \"end\":\n            return _context6.stop();\n        }\n      }\n    }, _callee6);\n  }));\n\n  return function uploadFile(_x11, _x12, _x13) {\n    return _ref7.apply(this, arguments);\n  };\n}();\n/*\n * @function\n * @param {Object} client - A CozyClient instance\n * @param {Object} file - The uploaded javascript File object\n * @param {string} path - The file's path in the cozy\n * @param {{onUploadProgress}} options\n * @return {Object} - The updated io.cozy.files\n */\n\n\nvar overwriteFile = /*#__PURE__*/function () {\n  var _ref9 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee7(client, file, path) {\n    var options,\n        statResp,\n        _statResp$data,\n        fileId,\n        dirId,\n        resp,\n        _args7 = arguments;\n\n    return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee7$(_context7) {\n      while (1) {\n        switch (_context7.prev = _context7.next) {\n          case 0:\n            options = _args7.length > 3 && _args7[3] !== undefined ? _args7[3] : {};\n            _context7.next = 3;\n            return client.collection(drive_lib_doctypes__WEBPACK_IMPORTED_MODULE_11__[\"DOCTYPE_FILES\"]).statByPath(path);\n\n          case 3:\n            statResp = _context7.sent;\n            _statResp$data = statResp.data, fileId = _statResp$data.id, dirId = _statResp$data.dir_id;\n            _context7.next = 7;\n            return client.collection(drive_lib_doctypes__WEBPACK_IMPORTED_MODULE_11__[\"DOCTYPE_FILES\"]).updateFile(file, {\n              dirId: dirId,\n              fileId: fileId,\n              options: options\n            });\n\n          case 7:\n            resp = _context7.sent;\n            return _context7.abrupt(\"return\", resp.data);\n\n          case 9:\n          case \"end\":\n            return _context7.stop();\n        }\n      }\n    }, _callee7);\n  }));\n\n  return function overwriteFile(_x14, _x15, _x16) {\n    return _ref9.apply(this, arguments);\n  };\n}();\nvar uploadFilesFromNative = function uploadFilesFromNative(files, folderId, uploadFilesSuccessCallback, _ref10) {\n  var client = _ref10.client,\n      vaultClient = _ref10.vaultClient;\n  return /*#__PURE__*/function () {\n    var _ref11 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee8(dispatch) {\n      var encryptionKey, _iterator, _step, file, fileOpts, blobFile, encryptedFile;\n\n      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee8$(_context8) {\n        while (1) {\n          switch (_context8.prev = _context8.next) {\n            case 0:\n              dispatch({\n                type: ADD_TO_UPLOAD_QUEUE,\n                files: files\n              });\n              _context8.next = 3;\n              return Object(drive_lib_encryption__WEBPACK_IMPORTED_MODULE_10__[\"getEncryptionKeyFromDirId\"])(client, folderId);\n\n            case 3:\n              encryptionKey = _context8.sent;\n              // !TODO Promise.All to use parallelization\n              _iterator = _createForOfIteratorHelper(files);\n              _context8.prev = 5;\n\n              _iterator.s();\n\n            case 7:\n              if ((_step = _iterator.n()).done) {\n                _context8.next = 32;\n                break;\n              }\n\n              file = _step.value;\n              _context8.prev = 9;\n              fileOpts = {\n                name: file.file.name,\n                dirId: folderId,\n                conflictStrategy: 'rename'\n              };\n\n              if (!encryptionKey) {\n                _context8.next = 22;\n                break;\n              }\n\n              _context8.next = 14;\n              return readMobileFile(file.file.fileUrl);\n\n            case 14:\n              blobFile = _context8.sent;\n              _context8.next = 17;\n              return vaultClient.encryptFile(blobFile, encryptionKey);\n\n            case 17:\n              encryptedFile = _context8.sent;\n              _context8.next = 20;\n              return uploadFileWithConflictStrategy(client, encryptedFile, _babel_runtime_helpers_objectSpread__WEBPACK_IMPORTED_MODULE_3___default()({}, fileOpts, {\n                contentType: drive_constants_config__WEBPACK_IMPORTED_MODULE_8__[\"ENCRYPTION_MIME_TYPE\"]\n              }));\n\n            case 20:\n              _context8.next = 24;\n              break;\n\n            case 22:\n              _context8.next = 24;\n              return doMobileUpload(client, file.file.fileUrl, _babel_runtime_helpers_objectSpread__WEBPACK_IMPORTED_MODULE_3___default()({}, fileOpts, {\n                contentType: file.file.type\n              }));\n\n            case 24:\n              dispatch(removeFileToUploadQueue(file.file));\n              _context8.next = 30;\n              break;\n\n            case 27:\n              _context8.prev = 27;\n              _context8.t0 = _context8[\"catch\"](9);\n              lib_logger__WEBPACK_IMPORTED_MODULE_5__[\"default\"].error(\"Uploading files from native failed with file \".concat(file.file, \": \").concat(_context8.t0));\n\n            case 30:\n              _context8.next = 7;\n              break;\n\n            case 32:\n              _context8.next = 37;\n              break;\n\n            case 34:\n              _context8.prev = 34;\n              _context8.t1 = _context8[\"catch\"](5);\n\n              _iterator.e(_context8.t1);\n\n            case 37:\n              _context8.prev = 37;\n\n              _iterator.f();\n\n              return _context8.finish(37);\n\n            case 40:\n              if (uploadFilesSuccessCallback) uploadFilesSuccessCallback();\n\n            case 41:\n            case \"end\":\n              return _context8.stop();\n          }\n        }\n      }, _callee8, null, [[5, 34, 37, 40], [9, 27]]);\n    }));\n\n    return function (_x17) {\n      return _ref11.apply(this, arguments);\n    };\n  }();\n};\nvar removeFileToUploadQueue = function removeFileToUploadQueue(file) {\n  return /*#__PURE__*/function () {\n    var _ref12 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee9(dispatch) {\n      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee9$(_context9) {\n        while (1) {\n          switch (_context9.prev = _context9.next) {\n            case 0:\n              dispatch({\n                type: RECEIVE_UPLOAD_SUCCESS,\n                file: file,\n                isUpdate: true\n              });\n\n            case 1:\n            case \"end\":\n              return _context9.stop();\n          }\n        }\n      }, _callee9);\n    }));\n\n    return function (_x18) {\n      return _ref12.apply(this, arguments);\n    };\n  }();\n};\nvar addToUploadQueue = function addToUploadQueue(files, dirID, sharingState, fileUploadedCallback, queueCompletedCallback, _ref13) {\n  var client = _ref13.client,\n      vaultClient = _ref13.vaultClient;\n  return /*#__PURE__*/function () {\n    var _ref14 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee10(dispatch) {\n      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee10$(_context10) {\n        while (1) {\n          switch (_context10.prev = _context10.next) {\n            case 0:\n              dispatch({\n                type: ADD_TO_UPLOAD_QUEUE,\n                files: extractFilesEntries(files)\n              });\n              dispatch(processNextFile(fileUploadedCallback, queueCompletedCallback, dirID, sharingState, {\n                client: client,\n                vaultClient: vaultClient\n              }));\n\n            case 2:\n            case \"end\":\n              return _context10.stop();\n          }\n        }\n      }, _callee10);\n    }));\n\n    return function (_x19) {\n      return _ref14.apply(this, arguments);\n    };\n  }();\n};\nvar purgeUploadQueue = function purgeUploadQueue() {\n  return {\n    type: PURGE_UPLOAD_QUEUE\n  };\n};\nvar onQueueEmpty = function onQueueEmpty(callback) {\n  return function (dispatch, getState) {\n    var queue = getUploadQueue(getState());\n    var quotas = getQuotaErrors(queue);\n    var conflicts = getConflicts(queue);\n    var created = getCreated(queue);\n    var updated = getUpdated(queue);\n    var networkErrors = getNetworkErrors(queue);\n    var errors = getErrors(queue);\n    return callback(created, quotas, conflicts, networkErrors, errors, updated);\n  };\n}; // selectors\n\nvar filterByStatus = function filterByStatus(queue, status) {\n  return queue.filter(function (f) {\n    return f.status === status;\n  });\n};\n\nvar getConflicts = function getConflicts(queue) {\n  return filterByStatus(queue, CONFLICT);\n};\n\nvar getErrors = function getErrors(queue) {\n  return filterByStatus(queue, FAILED);\n};\n\nvar getQuotaErrors = function getQuotaErrors(queue) {\n  return filterByStatus(queue, QUOTA);\n};\n\nvar getNetworkErrors = function getNetworkErrors(queue) {\n  return filterByStatus(queue, NETWORK);\n};\n\nvar getCreated = function getCreated(queue) {\n  return filterByStatus(queue, CREATED);\n};\n\nvar getUpdated = function getUpdated(queue) {\n  return filterByStatus(queue, UPDATED);\n};\n\nvar getUploadQueue = function getUploadQueue(state) {\n  return state[SLUG].queue;\n};\nvar getProcessed = function getProcessed(state) {\n  return getUploadQueue(state).filter(function (f) {\n    return f.status !== PENDING;\n  });\n};\nvar getSuccessful = function getSuccessful(state) {\n  var queue = getUploadQueue(state);\n  return queue.filter(function (f) {\n    return [CREATED, UPDATED].includes(f.status);\n  });\n};\nvar selectors = {\n  getConflicts: getConflicts,\n  getErrors: getErrors,\n  getQuotaErrors: getQuotaErrors,\n  getNetworkErrors: getNetworkErrors,\n  getCreated: getCreated,\n  getUpdated: getUpdated,\n  getProcessed: getProcessed,\n  getSuccessful: getSuccessful\n}; // DOM helpers\n\nvar extractFilesEntries = function extractFilesEntries(items) {\n  var results = [];\n\n  for (var i = 0; i < items.length; i += 1) {\n    var _item = items[i];\n\n    if (_item.webkitGetAsEntry != null && _item.webkitGetAsEntry()) {\n      var entry = _item.webkitGetAsEntry();\n\n      results.push({\n        file: _item.getAsFile(),\n        isDirectory: entry.isDirectory === true,\n        entry: entry\n      });\n    } else {\n      results.push({\n        file: _item,\n        isDirectory: false,\n        entry: null\n      });\n    }\n  }\n\n  if (results.length === 0) {\n    lib_logger__WEBPACK_IMPORTED_MODULE_5__[\"default\"].warn('Upload module files entries extraction: no file entry');\n  }\n\n  return results;\n};//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvZHJpdmUvd2ViL21vZHVsZXMvdXBsb2FkL2luZGV4LmpzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vc3JjL2RyaXZlL3dlYi9tb2R1bGVzL3VwbG9hZC9pbmRleC5qcz9kOTRkIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGNvbWJpbmVSZWR1Y2VycyB9IGZyb20gJ3JlZHV4J1xuXG5pbXBvcnQgbG9nZ2VyIGZyb20gJ2xpYi9sb2dnZXInXG5pbXBvcnQgeyBDb3p5RmlsZSB9IGZyb20gJ21vZGVscydcblxuaW1wb3J0IHsgbG9nRXhjZXB0aW9uIH0gZnJvbSAnZHJpdmUvbGliL3JlcG9ydGVyJ1xuaW1wb3J0IHsgRU5DUllQVElPTl9NSU1FX1RZUEUgfSBmcm9tICdkcml2ZS9jb25zdGFudHMvY29uZmlnJ1xuaW1wb3J0IFVwbG9hZFF1ZXVlIGZyb20gJy4vVXBsb2FkUXVldWUnXG5pbXBvcnQge1xuICBlbmNyeXB0QW5kVXBsb2FkTmV3RmlsZSxcbiAgZ2V0RW5jcnlwdGlvbktleUZyb21EaXJJZFxufSBmcm9tICdkcml2ZS9saWIvZW5jcnlwdGlvbidcbmltcG9ydCB7IERPQ1RZUEVfRklMRVMgfSBmcm9tICdkcml2ZS9saWIvZG9jdHlwZXMnXG5cbmltcG9ydCB7IG1vZGVscyB9IGZyb20gJ2NvenktY2xpZW50J1xuY29uc3Qge1xuICBkb01vYmlsZVVwbG9hZCxcbiAgcmVhZE1vYmlsZUZpbGUsXG4gIHVwbG9hZEZpbGVXaXRoQ29uZmxpY3RTdHJhdGVneVxufSA9IG1vZGVscy5maWxlXG5cbmV4cG9ydCB7IFVwbG9hZFF1ZXVlIH1cblxuY29uc3QgU0xVRyA9ICd1cGxvYWQnXG5cbmV4cG9ydCBjb25zdCBBRERfVE9fVVBMT0FEX1FVRVVFID0gJ0FERF9UT19VUExPQURfUVVFVUUnXG5jb25zdCBVUExPQURfRklMRSA9ICdVUExPQURfRklMRSdcbmNvbnN0IFVQTE9BRF9QUk9HUkVTUyA9ICdVUExPQURfUFJPR1JFU1MnXG5jb25zdCBSRUNFSVZFX1VQTE9BRF9TVUNDRVNTID0gJ1JFQ0VJVkVfVVBMT0FEX1NVQ0NFU1MnXG5jb25zdCBSRUNFSVZFX1VQTE9BRF9FUlJPUiA9ICdSRUNFSVZFX1VQTE9BRF9FUlJPUidcbmNvbnN0IFBVUkdFX1VQTE9BRF9RVUVVRSA9ICdQVVJHRV9VUExPQURfUVVFVUUnXG5cbmNvbnN0IENBTkNFTCA9ICdjYW5jZWwnXG5jb25zdCBQRU5ESU5HID0gJ3BlbmRpbmcnXG5jb25zdCBMT0FESU5HID0gJ2xvYWRpbmcnXG5jb25zdCBDUkVBVEVEID0gJ2NyZWF0ZWQnXG5jb25zdCBVUERBVEVEID0gJ3VwZGF0ZWQnXG5jb25zdCBGQUlMRUQgPSAnZmFpbGVkJ1xuY29uc3QgQ09ORkxJQ1QgPSAnY29uZmxpY3QnXG5jb25zdCBRVU9UQSA9ICdxdW90YSdcbmNvbnN0IE5FVFdPUksgPSAnbmV0d29yaydcbmNvbnN0IERPTkVfU1RBVFVTRVMgPSBbQ1JFQVRFRCwgVVBEQVRFRF1cbmNvbnN0IEVSUk9SX1NUQVRVU0VTID0gW0NPTkZMSUNULCBORVRXT1JLLCBRVU9UQV1cblxuZXhwb3J0IGNvbnN0IHN0YXR1cyA9IHtcbiAgQ0FOQ0VMLFxuICBQRU5ESU5HLFxuICBMT0FESU5HLFxuICBDUkVBVEVELFxuICBVUERBVEVELFxuICBGQUlMRUQsXG4gIENPTkZMSUNULFxuICBRVU9UQSxcbiAgTkVUV09SSyxcbiAgRE9ORV9TVEFUVVNFUyxcbiAgRVJST1JfU1RBVFVTRVNcbn1cblxuY29uc3QgQ09ORkxJQ1RfRVJST1IgPSA0MDlcblxuY29uc3QgaXRlbUluaXRpYWxTdGF0ZSA9IGl0ZW0gPT4gKHtcbiAgLi4uaXRlbSxcbiAgc3RhdHVzOiBQRU5ESU5HLFxuICBwcm9ncmVzczogbnVsbFxufSlcblxuY29uc3QgZ2V0U3RhdHVzID0gKHN0YXRlLCBhY3Rpb24pID0+IHtcbiAgc3dpdGNoIChhY3Rpb24udHlwZSkge1xuICAgIGNhc2UgVVBMT0FEX0ZJTEU6XG4gICAgICByZXR1cm4gTE9BRElOR1xuICAgIGNhc2UgUkVDRUlWRV9VUExPQURfU1VDQ0VTUzpcbiAgICAgIHJldHVybiBhY3Rpb24uaXNVcGRhdGUgPyBVUERBVEVEIDogQ1JFQVRFRFxuICAgIGNhc2UgUkVDRUlWRV9VUExPQURfRVJST1I6XG4gICAgICByZXR1cm4gYWN0aW9uLnN0YXR1c1xuICAgIGRlZmF1bHQ6XG4gICAgICByZXR1cm4gc3RhdGVcbiAgfVxufVxuXG5jb25zdCBnZXRTcGVlZCA9IChzdGF0ZSwgYWN0aW9uKSA9PiB7XG4gIGNvbnN0IGxhc3RMb2FkZWQgPSBzdGF0ZS5sb2FkZWRcbiAgY29uc3QgbGFzdFVwZGF0ZWQgPSBzdGF0ZS5sYXN0VXBkYXRlZFxuICBjb25zdCBub3cgPSBhY3Rpb24uZGF0ZVxuICBjb25zdCBub3dMb2FkZWQgPSBhY3Rpb24ubG9hZGVkXG4gIHJldHVybiAoKG5vd0xvYWRlZCAtIGxhc3RMb2FkZWQpIC8gKG5vdyAtIGxhc3RVcGRhdGVkKSkgKiAxMDAwXG59XG5cbmxldCByZW1haW5pbmdUaW1lcyA9IFtdXG5sZXQgYXZlcmFnZVJlbWFpbmluZ1RpbWUgPSB1bmRlZmluZWRcbmxldCB0aW1lb3V0ID0gdW5kZWZpbmVkXG5cbmNvbnN0IGdldFByb2dyZXNzID0gKHN0YXRlLCBhY3Rpb24pID0+IHtcbiAgY29uc29sZS5sb2coJ2dldCBwcm9ncmVzcycpXG5cbiAgaWYgKGFjdGlvbi50eXBlID09PSBVUExPQURfUFJPR1JFU1MpIHtcbiAgICBjb25zdCBzcGVlZCA9IHN0YXRlID8gZ2V0U3BlZWQoc3RhdGUsIGFjdGlvbikgOiBudWxsXG4gICAgY29uc3QgbG9hZGVkID0gYWN0aW9uLmxvYWRlZFxuICAgIGNvbnN0IHRvdGFsID0gYWN0aW9uLnRvdGFsXG4gICAgY29uc3QgaW5zdGFudFJlbWFpbmluZ1RpbWUgPVxuICAgICAgc3BlZWQgJiYgdG90YWwgJiYgbG9hZGVkID8gKHRvdGFsIC0gbG9hZGVkKSAvIHNwZWVkIDogbnVsbFxuICAgIGNvbnNvbGUubG9nKHsgaW5zdGFudFJlbWFpbmluZ1RpbWUgfSlcblxuICAgIGlmICghYXZlcmFnZVJlbWFpbmluZ1RpbWUpIHtcbiAgICAgIGNvbnNvbGUubG9nKCdzZXQgZGVmYXVsdCBhdmVyYWdlIHJlbWFpbmluZyB0aW1lJylcbiAgICAgIGF2ZXJhZ2VSZW1haW5pbmdUaW1lID0gaW5zdGFudFJlbWFpbmluZ1RpbWVcbiAgICB9XG5cbiAgICBpZiAoaW5zdGFudFJlbWFpbmluZ1RpbWUpIHtcbiAgICAgIHJlbWFpbmluZ1RpbWVzLnB1c2goaW5zdGFudFJlbWFpbmluZ1RpbWUpXG4gICAgICBjb25zb2xlLmxvZygncHVzaCBpbiBhcnJheScpXG4gICAgfVxuXG4gICAgaWYgKCF0aW1lb3V0KSB7XG4gICAgICBjb25zb2xlLmxvZygnbm8gdGltZW91dCwgaiBlbiBzZXQgdW4nKVxuICAgICAgdGltZW91dCA9IHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICBjb25zb2xlLmxvZygndGltIG91dCwgamUgY2FsY3VsZScpXG5cbiAgICAgICAgYXZlcmFnZVJlbWFpbmluZ1RpbWUgPSByZW1haW5pbmdUaW1lcyA9PlxuICAgICAgICAgIHJlbWFpbmluZ1RpbWVzLnJlZHVjZSgoYSwgYikgPT4gYSArIGIpIC8gcmVtYWluaW5nVGltZXMubGVuZ3RoXG4gICAgICAgIGNvbnNvbGUubG9nKHsgYXZlcmFnZVJlbWFpbmluZ1RpbWUgfSlcblxuICAgICAgICBjbGVhclRpbWVvdXQodGltZW91dClcbiAgICAgIH0sIDEwMDApXG4gICAgfVxuXG4gICAgcmV0dXJuIHtcbiAgICAgIGxvYWRlZCxcbiAgICAgIHRvdGFsLFxuICAgICAgbGFzdFVwZGF0ZWQ6IGFjdGlvbi5kYXRlLFxuICAgICAgc3BlZWQsXG4gICAgICByZW1haW5pbmdUaW1lOiBhdmVyYWdlUmVtYWluaW5nVGltZVxuICAgIH1cbiAgfSBlbHNlIGlmIChcbiAgICBhY3Rpb24udHlwZSA9PT0gUkVDRUlWRV9VUExPQURfU1VDQ0VTUyB8fFxuICAgIGFjdGlvbi50eXBlID09PSBSRUNFSVZFX1VQTE9BRF9FUlJPUlxuICApIHtcbiAgICByZXR1cm4gbnVsbFxuICB9IGVsc2Uge1xuICAgIHJldHVybiBzdGF0ZVxuICB9XG59XG5cbmNvbnN0IGl0ZW0gPSAoc3RhdGUsIGFjdGlvbiA9IHsgaXNVcGRhdGU6IGZhbHNlIH0pID0+ICh7XG4gIC4uLnN0YXRlLFxuICBzdGF0dXM6IGdldFN0YXR1cyhzdGF0ZS5zdGF0dXMsIGFjdGlvbiksXG4gIHByb2dyZXNzOiBnZXRQcm9ncmVzcyhzdGF0ZS5wcm9ncmVzcywgYWN0aW9uKVxufSlcblxuZXhwb3J0IGNvbnN0IHF1ZXVlID0gKHN0YXRlID0gW10sIGFjdGlvbikgPT4ge1xuICBjb25zb2xlLmxvZygnaW4gcXVldWUnKVxuXG4gIHN3aXRjaCAoYWN0aW9uLnR5cGUpIHtcbiAgICBjYXNlIEFERF9UT19VUExPQURfUVVFVUU6XG4gICAgICByZXR1cm4gW1xuICAgICAgICAuLi5zdGF0ZS5maWx0ZXIoaSA9PiBpLnN0YXR1cyAhPT0gQ1JFQVRFRCksXG4gICAgICAgIC4uLmFjdGlvbi5maWxlcy5tYXAoZiA9PiBpdGVtSW5pdGlhbFN0YXRlKGYpKVxuICAgICAgXVxuICAgIGNhc2UgUFVSR0VfVVBMT0FEX1FVRVVFOlxuICAgICAgcmV0dXJuIFtdXG4gICAgY2FzZSBVUExPQURfRklMRTpcbiAgICBjYXNlIFJFQ0VJVkVfVVBMT0FEX1NVQ0NFU1M6XG4gICAgY2FzZSBSRUNFSVZFX1VQTE9BRF9FUlJPUjpcbiAgICBjYXNlIFVQTE9BRF9QUk9HUkVTUzpcbiAgICAgIGNvbnNvbGUubG9nKCdpbiBjYXNlJylcblxuICAgICAgcmV0dXJuIHN0YXRlLm1hcChpID0+XG4gICAgICAgIGkuZmlsZS5uYW1lICE9PSBhY3Rpb24uZmlsZS5uYW1lID8gaSA6IGl0ZW0oaSwgYWN0aW9uKVxuICAgICAgKVxuICAgIGRlZmF1bHQ6XG4gICAgICByZXR1cm4gc3RhdGVcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBjb21iaW5lUmVkdWNlcnMoeyBxdWV1ZSB9KVxuXG5leHBvcnQgY29uc3QgdXBsb2FkUHJvZ3Jlc3MgPSAoZmlsZSwgZXZlbnQsIGRhdGUpID0+ICh7XG4gIHR5cGU6IFVQTE9BRF9QUk9HUkVTUyxcbiAgZmlsZSxcbiAgbG9hZGVkOiBldmVudC5sb2FkZWQsXG4gIHRvdGFsOiBldmVudC50b3RhbCxcbiAgZGF0ZTogZGF0ZSB8fCBEYXRlLm5vdygpXG59KVxuXG5leHBvcnQgY29uc3QgcHJvY2Vzc05leHRGaWxlID0gKFxuICBmaWxlVXBsb2FkZWRDYWxsYmFjayxcbiAgcXVldWVDb21wbGV0ZWRDYWxsYmFjayxcbiAgZGlySUQsXG4gIHNoYXJpbmdTdGF0ZSxcbiAgeyBjbGllbnQsIHZhdWx0Q2xpZW50IH1cbikgPT4gYXN5bmMgKGRpc3BhdGNoLCBnZXRTdGF0ZSkgPT4ge1xuICBsZXQgZXJyb3IgPSBudWxsXG4gIGlmICghY2xpZW50KSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgJ1VwbG9hZCBtb2R1bGUgbmVlZHMgYSBjb3p5LWNsaWVudCBpbnN0YW5jZSB0byB3b3JrLiBUaGlzIGluc3RhbmNlIHNob3VsZCBiZSBtYWRlIGF2YWlsYWJsZSBieSB1c2luZyB0aGUgZXh0cmFBcmd1bWVudCBmdW5jdGlvbiBvZiByZWR1eC10aHVuaydcbiAgICApXG4gIH1cbiAgY29uc3QgaXRlbSA9IGdldFVwbG9hZFF1ZXVlKGdldFN0YXRlKCkpLmZpbmQoaSA9PiBpLnN0YXR1cyA9PT0gUEVORElORylcbiAgaWYgKCFpdGVtKSB7XG4gICAgcmV0dXJuIGRpc3BhdGNoKG9uUXVldWVFbXB0eShxdWV1ZUNvbXBsZXRlZENhbGxiYWNrKSlcbiAgfVxuXG4gIGNvbnN0IHsgZmlsZSwgZW50cnksIGlzRGlyZWN0b3J5IH0gPSBpdGVtXG4gIGNvbnN0IGVuY3J5cHRpb25LZXkgPSBhd2FpdCBnZXRFbmNyeXB0aW9uS2V5RnJvbURpcklkKGNsaWVudCwgZGlySUQpXG4gIHRyeSB7XG4gICAgZGlzcGF0Y2goeyB0eXBlOiBVUExPQURfRklMRSwgZmlsZSB9KVxuICAgIGlmIChlbnRyeSAmJiBpc0RpcmVjdG9yeSkge1xuICAgICAgY29uc3QgbmV3RGlyID0gYXdhaXQgdXBsb2FkRGlyZWN0b3J5KGNsaWVudCwgZW50cnksIGRpcklELCB7XG4gICAgICAgIHZhdWx0Q2xpZW50LFxuICAgICAgICBlbmNyeXB0aW9uS2V5XG4gICAgICB9KVxuICAgICAgZmlsZVVwbG9hZGVkQ2FsbGJhY2sobmV3RGlyKVxuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCB3aXRoUHJvZ3Jlc3MgPSB7XG4gICAgICAgIG9uVXBsb2FkUHJvZ3Jlc3M6IGV2ZW50ID0+IHtcbiAgICAgICAgICBkaXNwYXRjaCh1cGxvYWRQcm9ncmVzcyhmaWxlLCBldmVudCkpXG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgY29uc3QgdXBsb2FkZWRGaWxlID0gYXdhaXQgdXBsb2FkRmlsZShjbGllbnQsIGZpbGUsIGRpcklELCB7XG4gICAgICAgIHZhdWx0Q2xpZW50LFxuICAgICAgICBlbmNyeXB0aW9uS2V5LFxuICAgICAgICAuLi53aXRoUHJvZ3Jlc3NcbiAgICAgIH0pXG5cbiAgICAgIGZpbGVVcGxvYWRlZENhbGxiYWNrKHVwbG9hZGVkRmlsZSlcbiAgICB9XG4gICAgZGlzcGF0Y2goeyB0eXBlOiBSRUNFSVZFX1VQTE9BRF9TVUNDRVNTLCBmaWxlIH0pXG4gIH0gY2F0Y2ggKHVwbG9hZEVycm9yKSB7XG4gICAgZXJyb3IgPSB1cGxvYWRFcnJvclxuICAgIGlmICh1cGxvYWRFcnJvci5zdGF0dXMgPT09IENPTkZMSUNUX0VSUk9SKSB7XG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCBwYXRoID0gYXdhaXQgQ296eUZpbGUuZ2V0RnVsbHBhdGgoZGlySUQsIGZpbGUubmFtZSlcbiAgICAgICAgY29uc3QgdXBsb2FkZWRGaWxlID0gYXdhaXQgb3ZlcndyaXRlRmlsZShjbGllbnQsIGZpbGUsIHBhdGgsIHtcbiAgICAgICAgICBvblVwbG9hZFByb2dyZXNzOiBldmVudCA9PiB7XG4gICAgICAgICAgICBkaXNwYXRjaCh1cGxvYWRQcm9ncmVzcyhmaWxlLCBldmVudCkpXG4gICAgICAgICAgfVxuICAgICAgICB9KVxuICAgICAgICBmaWxlVXBsb2FkZWRDYWxsYmFjayh1cGxvYWRlZEZpbGUpXG4gICAgICAgIGRpc3BhdGNoKHsgdHlwZTogUkVDRUlWRV9VUExPQURfU1VDQ0VTUywgZmlsZSwgaXNVcGRhdGU6IHRydWUgfSlcbiAgICAgICAgZXJyb3IgPSBudWxsXG4gICAgICB9IGNhdGNoICh1cGRhdGVFcnJvcikge1xuICAgICAgICBlcnJvciA9IHVwZGF0ZUVycm9yXG4gICAgICB9XG4gICAgfVxuICAgIGlmIChlcnJvcikge1xuICAgICAgbG9nZ2VyLndhcm4oZXJyb3IpXG4gICAgICBsb2dFeGNlcHRpb24oXG4gICAgICAgIGBVcGxvYWQgbW9kdWxlIGNhdGNoZXMgYW4gZXJyb3Igd2hlbiBleGVjdXRpbmcgcHJvY2Vzc05leHRGaWxlKCk6ICR7ZXJyb3J9YFxuICAgICAgKVxuICAgICAgY29uc3Qgc3RhdHVzRXJyb3IgPSB7XG4gICAgICAgIDQwOTogQ09ORkxJQ1QsXG4gICAgICAgIDQxMzogUVVPVEFcbiAgICAgIH1cblxuICAgICAgY29uc3Qgc3RhdHVzID1cbiAgICAgICAgc3RhdHVzRXJyb3JbZXJyb3Iuc3RhdHVzXSB8fFxuICAgICAgICAoL0ZhaWxlZCB0byBmZXRjaCQvLmV4ZWMoZXJyb3IudG9TdHJpbmcoKSkgJiYgTkVUV09SSykgfHxcbiAgICAgICAgRkFJTEVEXG5cbiAgICAgIGRpc3BhdGNoKHsgdHlwZTogUkVDRUlWRV9VUExPQURfRVJST1IsIGZpbGUsIHN0YXR1cyB9KVxuICAgIH1cbiAgfVxuICBkaXNwYXRjaChcbiAgICBwcm9jZXNzTmV4dEZpbGUoXG4gICAgICBmaWxlVXBsb2FkZWRDYWxsYmFjayxcbiAgICAgIHF1ZXVlQ29tcGxldGVkQ2FsbGJhY2ssXG4gICAgICBkaXJJRCxcbiAgICAgIHNoYXJpbmdTdGF0ZSxcbiAgICAgIHsgY2xpZW50LCB2YXVsdENsaWVudCB9XG4gICAgKVxuICApXG59XG5cbmNvbnN0IGdldEZpbGVGcm9tRW50cnkgPSBlbnRyeSA9PiBuZXcgUHJvbWlzZShyZXNvbHZlID0+IGVudHJ5LmZpbGUocmVzb2x2ZSkpXG5cbmNvbnN0IHVwbG9hZERpcmVjdG9yeSA9IGFzeW5jIChcbiAgY2xpZW50LFxuICBkaXJlY3RvcnksXG4gIGRpcklELFxuICB7IHZhdWx0Q2xpZW50LCBlbmNyeXB0aW9uS2V5IH1cbikgPT4ge1xuICBjb25zdCBuZXdEaXIgPSBhd2FpdCBjcmVhdGVGb2xkZXIoY2xpZW50LCBkaXJlY3RvcnkubmFtZSwgZGlySUQpXG4gIGNvbnN0IGRpclJlYWRlciA9IGRpcmVjdG9yeS5jcmVhdGVSZWFkZXIoKVxuICByZXR1cm4gbmV3IFByb21pc2UocmVzb2x2ZSA9PiB7XG4gICAgY29uc3QgZW50cmllc1JlYWRlciA9IGFzeW5jIGVudHJpZXMgPT4ge1xuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBlbnRyaWVzLmxlbmd0aDsgaSArPSAxKSB7XG4gICAgICAgIGNvbnN0IGVudHJ5ID0gZW50cmllc1tpXVxuICAgICAgICBpZiAoZW50cnkuaXNGaWxlKSB7XG4gICAgICAgICAgY29uc3QgZmlsZSA9IGF3YWl0IGdldEZpbGVGcm9tRW50cnkoZW50cnkpXG4gICAgICAgICAgYXdhaXQgdXBsb2FkRmlsZShjbGllbnQsIGZpbGUsIG5ld0Rpci5pZCwge1xuICAgICAgICAgICAgdmF1bHRDbGllbnQsXG4gICAgICAgICAgICBlbmNyeXB0aW9uS2V5XG4gICAgICAgICAgfSlcbiAgICAgICAgfSBlbHNlIGlmIChlbnRyeS5pc0RpcmVjdG9yeSkge1xuICAgICAgICAgIGF3YWl0IHVwbG9hZERpcmVjdG9yeShjbGllbnQsIGVudHJ5LCBuZXdEaXIuaWQsIHtcbiAgICAgICAgICAgIHZhdWx0Q2xpZW50LFxuICAgICAgICAgICAgZW5jcnlwdGlvbktleVxuICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJlc29sdmUobmV3RGlyKVxuICAgIH1cbiAgICBkaXJSZWFkZXIucmVhZEVudHJpZXMoZW50cmllc1JlYWRlcilcbiAgfSlcbn1cblxuY29uc3QgY3JlYXRlRm9sZGVyID0gYXN5bmMgKGNsaWVudCwgbmFtZSwgZGlySUQpID0+IHtcbiAgY29uc3QgcmVzcCA9IGF3YWl0IGNsaWVudFxuICAgIC5jb2xsZWN0aW9uKERPQ1RZUEVfRklMRVMpXG4gICAgLmNyZWF0ZURpcmVjdG9yeSh7IG5hbWUsIGRpcklkOiBkaXJJRCB9KVxuICByZXR1cm4gcmVzcC5kYXRhXG59XG5cbmNvbnN0IHVwbG9hZEZpbGUgPSBhc3luYyAoY2xpZW50LCBmaWxlLCBkaXJJRCwgb3B0aW9ucyA9IHt9KSA9PiB7XG4gIC8qKiBXZSBoYXZlIGEgYnVnIHdpdGggQ2hyb21lIHJldHVybmluZyBTUERZX0VSUk9SX1BST1RPQ09MLlxuICAgKiBUaGlzIGlzIGNlcnRhaW5seSBjYXVzZWQgYnkgdGhlIGNvdXBsZSBIVFRQMiAvIEhBUHJveHkgLyBDb3p5U3RhY2tcbiAgICogd2hlbiBzb21ldGhpbmcgY3V0IHRoZSBIVFRQIGNvbm5leGlvbiBiZWZvcmUgdGhlIFN0YWNrXG4gICAqXG4gICAqIFdlIGNhbiBub3QgaW50ZXJjZXB0IHRoaXMgZXJyb3Igc2luY2UgQ2hyb21lIG9ubHkgcmV0dXJuc1xuICAgKiBgRmFpbGVkIHRvIGZldGNoYCBhcyBpZiB3ZSB3ZXJlIG9mZmxpbmUuIFRoZSBvbmx5IHdvcmthcm91bmQgZm9yXG4gICAqIG5vdywgaXMgdG8gY2hlY2sgaWYgd2UnbGwgaGF2ZSBlbm91Z2ggc2l6ZSBvbiB0aGUgQ296eSBiZWZvcmVcbiAgICogdHJ5aW5nIHRvIHVwbG9hZCB0aGUgZmlsZSB0byBkZXRlY3QgaWYgd2UnbGwgZ28gb3V0IG9mIHF1b3RhXG4gICAqIGJlZm9yZSBjb25uZXhpb24gYmVpbmcgY3V0IGJ5IHNvbWV0aGluZy5cbiAgICpcbiAgICogV2UgZG9uJ3QgbmVlZCB0byBkbyB0aGF0IHdvcmsgb24gb3RoZXIgYnJvd3NlciAod2luZG93LmNocm9tZVxuICAgKiBzaG91bGQgYmUgYXZhaWxhYmxlIG9uIG5ldyBFZGdlLCBDaHJvbWUsIENocm9taXVtLCBCcmF2ZSwgT3BlcmEuLi4pXG4gICAqL1xuICBpZiAod2luZG93LmNocm9tZSkge1xuICAgIGNvbnN0IHsgZGF0YTogZGlza1VzYWdlIH0gPSBhd2FpdCBjbGllbnRcbiAgICAgIC5nZXRTdGFja0NsaWVudCgpXG4gICAgICAuZmV0Y2hKU09OKCdHRVQnLCAnL3NldHRpbmdzL2Rpc2stdXNhZ2UnKVxuICAgIGlmIChkaXNrVXNhZ2UuYXR0cmlidXRlcy5xdW90YSkge1xuICAgICAgaWYgKFxuICAgICAgICBwYXJzZUludChkaXNrVXNhZ2UuYXR0cmlidXRlcy51c2VkKSArIHBhcnNlSW50KGZpbGUuc2l6ZSkgPlxuICAgICAgICBwYXJzZUludChkaXNrVXNhZ2UuYXR0cmlidXRlcy5xdW90YSlcbiAgICAgICkge1xuICAgICAgICBjb25zdCBlcnJvciA9IG5ldyBFcnJvcignUGF5bG9hZCBUb28gTGFyZ2UnKVxuICAgICAgICBlcnJvci5zdGF0dXMgPSA0MTNcbiAgICAgICAgdGhyb3cgZXJyb3JcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBjb25zdCB7IG9uVXBsb2FkUHJvZ3Jlc3MsIGVuY3J5cHRpb25LZXksIHZhdWx0Q2xpZW50IH0gPSBvcHRpb25zXG5cbiAgaWYgKGVuY3J5cHRpb25LZXkgJiYgdmF1bHRDbGllbnQpIHtcbiAgICAvLyBUT0RPOiB1c2Ugd2ViIHdvcmtlclxuICAgIGNvbnN0IGZyID0gbmV3IEZpbGVSZWFkZXIoKVxuICAgIGZyLm9ubG9hZGVuZCA9IGFzeW5jICgpID0+IHtcbiAgICAgIHJldHVybiBlbmNyeXB0QW5kVXBsb2FkTmV3RmlsZShjbGllbnQsIHZhdWx0Q2xpZW50LCB7XG4gICAgICAgIGZpbGU6IGZyLnJlc3VsdCxcbiAgICAgICAgZW5jcnlwdGlvbktleSxcbiAgICAgICAgZmlsZU9wdGlvbnM6IHtcbiAgICAgICAgICBuYW1lOiBmaWxlLm5hbWUsXG4gICAgICAgICAgZGlySUQsXG4gICAgICAgICAgb25VcGxvYWRQcm9ncmVzc1xuICAgICAgICB9XG4gICAgICB9KVxuICAgIH1cbiAgICBmci5yZWFkQXNBcnJheUJ1ZmZlcihmaWxlKVxuICB9IGVsc2Uge1xuICAgIGNvbnN0IHJlc3AgPSBhd2FpdCBjbGllbnRcbiAgICAgIC5jb2xsZWN0aW9uKERPQ1RZUEVfRklMRVMpXG4gICAgICAuY3JlYXRlRmlsZShmaWxlLCB7IGRpcklkOiBkaXJJRCwgb25VcGxvYWRQcm9ncmVzcyB9KVxuXG4gICAgcmV0dXJuIHJlc3AuZGF0YVxuICB9XG59XG5cbi8qXG4gKiBAZnVuY3Rpb25cbiAqIEBwYXJhbSB7T2JqZWN0fSBjbGllbnQgLSBBIENvenlDbGllbnQgaW5zdGFuY2VcbiAqIEBwYXJhbSB7T2JqZWN0fSBmaWxlIC0gVGhlIHVwbG9hZGVkIGphdmFzY3JpcHQgRmlsZSBvYmplY3RcbiAqIEBwYXJhbSB7c3RyaW5nfSBwYXRoIC0gVGhlIGZpbGUncyBwYXRoIGluIHRoZSBjb3p5XG4gKiBAcGFyYW0ge3tvblVwbG9hZFByb2dyZXNzfX0gb3B0aW9uc1xuICogQHJldHVybiB7T2JqZWN0fSAtIFRoZSB1cGRhdGVkIGlvLmNvenkuZmlsZXNcbiAqL1xuZXhwb3J0IGNvbnN0IG92ZXJ3cml0ZUZpbGUgPSBhc3luYyAoY2xpZW50LCBmaWxlLCBwYXRoLCBvcHRpb25zID0ge30pID0+IHtcbiAgY29uc3Qgc3RhdFJlc3AgPSBhd2FpdCBjbGllbnQuY29sbGVjdGlvbihET0NUWVBFX0ZJTEVTKS5zdGF0QnlQYXRoKHBhdGgpXG4gIGNvbnN0IHsgaWQ6IGZpbGVJZCwgZGlyX2lkOiBkaXJJZCB9ID0gc3RhdFJlc3AuZGF0YVxuICBjb25zdCByZXNwID0gYXdhaXQgY2xpZW50XG4gICAgLmNvbGxlY3Rpb24oRE9DVFlQRV9GSUxFUylcbiAgICAudXBkYXRlRmlsZShmaWxlLCB7IGRpcklkLCBmaWxlSWQsIG9wdGlvbnMgfSlcblxuICByZXR1cm4gcmVzcC5kYXRhXG59XG5cbmV4cG9ydCBjb25zdCB1cGxvYWRGaWxlc0Zyb21OYXRpdmUgPSAoXG4gIGZpbGVzLFxuICBmb2xkZXJJZCxcbiAgdXBsb2FkRmlsZXNTdWNjZXNzQ2FsbGJhY2ssXG4gIHsgY2xpZW50LCB2YXVsdENsaWVudCB9XG4pID0+IGFzeW5jIGRpc3BhdGNoID0+IHtcbiAgZGlzcGF0Y2goe1xuICAgIHR5cGU6IEFERF9UT19VUExPQURfUVVFVUUsXG4gICAgZmlsZXM6IGZpbGVzXG4gIH0pXG4gIGNvbnN0IGVuY3J5cHRpb25LZXkgPSBhd2FpdCBnZXRFbmNyeXB0aW9uS2V5RnJvbURpcklkKGNsaWVudCwgZm9sZGVySWQpXG4gIC8vICFUT0RPIFByb21pc2UuQWxsIHRvIHVzZSBwYXJhbGxlbGl6YXRpb25cbiAgZm9yIChjb25zdCBmaWxlIG9mIGZpbGVzKSB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGZpbGVPcHRzID0ge1xuICAgICAgICBuYW1lOiBmaWxlLmZpbGUubmFtZSxcbiAgICAgICAgZGlySWQ6IGZvbGRlcklkLFxuICAgICAgICBjb25mbGljdFN0cmF0ZWd5OiAncmVuYW1lJ1xuICAgICAgfVxuICAgICAgaWYgKGVuY3J5cHRpb25LZXkpIHtcbiAgICAgICAgY29uc3QgYmxvYkZpbGUgPSBhd2FpdCByZWFkTW9iaWxlRmlsZShmaWxlLmZpbGUuZmlsZVVybClcbiAgICAgICAgY29uc3QgZW5jcnlwdGVkRmlsZSA9IGF3YWl0IHZhdWx0Q2xpZW50LmVuY3J5cHRGaWxlKFxuICAgICAgICAgIGJsb2JGaWxlLFxuICAgICAgICAgIGVuY3J5cHRpb25LZXlcbiAgICAgICAgKVxuICAgICAgICBhd2FpdCB1cGxvYWRGaWxlV2l0aENvbmZsaWN0U3RyYXRlZ3koY2xpZW50LCBlbmNyeXB0ZWRGaWxlLCB7XG4gICAgICAgICAgLi4uZmlsZU9wdHMsXG4gICAgICAgICAgY29udGVudFR5cGU6IEVOQ1JZUFRJT05fTUlNRV9UWVBFXG4gICAgICAgIH0pXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBhd2FpdCBkb01vYmlsZVVwbG9hZChjbGllbnQsIGZpbGUuZmlsZS5maWxlVXJsLCB7XG4gICAgICAgICAgLi4uZmlsZU9wdHMsXG4gICAgICAgICAgY29udGVudFR5cGU6IGZpbGUuZmlsZS50eXBlXG4gICAgICAgIH0pXG4gICAgICB9XG4gICAgICBkaXNwYXRjaChyZW1vdmVGaWxlVG9VcGxvYWRRdWV1ZShmaWxlLmZpbGUpKVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBsb2dnZXIuZXJyb3IoXG4gICAgICAgIGBVcGxvYWRpbmcgZmlsZXMgZnJvbSBuYXRpdmUgZmFpbGVkIHdpdGggZmlsZSAke2ZpbGUuZmlsZX06ICR7ZXJyb3J9YFxuICAgICAgKVxuICAgIH1cbiAgfVxuXG4gIGlmICh1cGxvYWRGaWxlc1N1Y2Nlc3NDYWxsYmFjaykgdXBsb2FkRmlsZXNTdWNjZXNzQ2FsbGJhY2soKVxufVxuXG5leHBvcnQgY29uc3QgcmVtb3ZlRmlsZVRvVXBsb2FkUXVldWUgPSBmaWxlID0+IGFzeW5jIGRpc3BhdGNoID0+IHtcbiAgZGlzcGF0Y2goeyB0eXBlOiBSRUNFSVZFX1VQTE9BRF9TVUNDRVNTLCBmaWxlLCBpc1VwZGF0ZTogdHJ1ZSB9KVxufVxuXG5leHBvcnQgY29uc3QgYWRkVG9VcGxvYWRRdWV1ZSA9IChcbiAgZmlsZXMsXG4gIGRpcklELFxuICBzaGFyaW5nU3RhdGUsXG4gIGZpbGVVcGxvYWRlZENhbGxiYWNrLFxuICBxdWV1ZUNvbXBsZXRlZENhbGxiYWNrLFxuICB7IGNsaWVudCwgdmF1bHRDbGllbnQgfVxuKSA9PiBhc3luYyBkaXNwYXRjaCA9PiB7XG4gIGRpc3BhdGNoKHtcbiAgICB0eXBlOiBBRERfVE9fVVBMT0FEX1FVRVVFLFxuICAgIGZpbGVzOiBleHRyYWN0RmlsZXNFbnRyaWVzKGZpbGVzKVxuICB9KVxuICBkaXNwYXRjaChcbiAgICBwcm9jZXNzTmV4dEZpbGUoXG4gICAgICBmaWxlVXBsb2FkZWRDYWxsYmFjayxcbiAgICAgIHF1ZXVlQ29tcGxldGVkQ2FsbGJhY2ssXG4gICAgICBkaXJJRCxcbiAgICAgIHNoYXJpbmdTdGF0ZSxcbiAgICAgIHsgY2xpZW50LCB2YXVsdENsaWVudCB9XG4gICAgKVxuICApXG59XG5cbmV4cG9ydCBjb25zdCBwdXJnZVVwbG9hZFF1ZXVlID0gKCkgPT4gKHsgdHlwZTogUFVSR0VfVVBMT0FEX1FVRVVFIH0pXG5cbmV4cG9ydCBjb25zdCBvblF1ZXVlRW1wdHkgPSBjYWxsYmFjayA9PiAoZGlzcGF0Y2gsIGdldFN0YXRlKSA9PiB7XG4gIGNvbnN0IHF1ZXVlID0gZ2V0VXBsb2FkUXVldWUoZ2V0U3RhdGUoKSlcbiAgY29uc3QgcXVvdGFzID0gZ2V0UXVvdGFFcnJvcnMocXVldWUpXG4gIGNvbnN0IGNvbmZsaWN0cyA9IGdldENvbmZsaWN0cyhxdWV1ZSlcbiAgY29uc3QgY3JlYXRlZCA9IGdldENyZWF0ZWQocXVldWUpXG4gIGNvbnN0IHVwZGF0ZWQgPSBnZXRVcGRhdGVkKHF1ZXVlKVxuICBjb25zdCBuZXR3b3JrRXJyb3JzID0gZ2V0TmV0d29ya0Vycm9ycyhxdWV1ZSlcbiAgY29uc3QgZXJyb3JzID0gZ2V0RXJyb3JzKHF1ZXVlKVxuXG4gIHJldHVybiBjYWxsYmFjayhjcmVhdGVkLCBxdW90YXMsIGNvbmZsaWN0cywgbmV0d29ya0Vycm9ycywgZXJyb3JzLCB1cGRhdGVkKVxufVxuXG4vLyBzZWxlY3RvcnNcbmNvbnN0IGZpbHRlckJ5U3RhdHVzID0gKHF1ZXVlLCBzdGF0dXMpID0+IHF1ZXVlLmZpbHRlcihmID0+IGYuc3RhdHVzID09PSBzdGF0dXMpXG5jb25zdCBnZXRDb25mbGljdHMgPSBxdWV1ZSA9PiBmaWx0ZXJCeVN0YXR1cyhxdWV1ZSwgQ09ORkxJQ1QpXG5jb25zdCBnZXRFcnJvcnMgPSBxdWV1ZSA9PiBmaWx0ZXJCeVN0YXR1cyhxdWV1ZSwgRkFJTEVEKVxuY29uc3QgZ2V0UXVvdGFFcnJvcnMgPSBxdWV1ZSA9PiBmaWx0ZXJCeVN0YXR1cyhxdWV1ZSwgUVVPVEEpXG5jb25zdCBnZXROZXR3b3JrRXJyb3JzID0gcXVldWUgPT4gZmlsdGVyQnlTdGF0dXMocXVldWUsIE5FVFdPUkspXG5jb25zdCBnZXRDcmVhdGVkID0gcXVldWUgPT4gZmlsdGVyQnlTdGF0dXMocXVldWUsIENSRUFURUQpXG5jb25zdCBnZXRVcGRhdGVkID0gcXVldWUgPT4gZmlsdGVyQnlTdGF0dXMocXVldWUsIFVQREFURUQpXG5cbmV4cG9ydCBjb25zdCBnZXRVcGxvYWRRdWV1ZSA9IHN0YXRlID0+IHN0YXRlW1NMVUddLnF1ZXVlXG5cbmV4cG9ydCBjb25zdCBnZXRQcm9jZXNzZWQgPSBzdGF0ZSA9PlxuICBnZXRVcGxvYWRRdWV1ZShzdGF0ZSkuZmlsdGVyKGYgPT4gZi5zdGF0dXMgIT09IFBFTkRJTkcpXG5cbmV4cG9ydCBjb25zdCBnZXRTdWNjZXNzZnVsID0gc3RhdGUgPT4ge1xuICBjb25zdCBxdWV1ZSA9IGdldFVwbG9hZFF1ZXVlKHN0YXRlKVxuICByZXR1cm4gcXVldWUuZmlsdGVyKGYgPT4gW0NSRUFURUQsIFVQREFURURdLmluY2x1ZGVzKGYuc3RhdHVzKSlcbn1cblxuZXhwb3J0IGNvbnN0IHNlbGVjdG9ycyA9IHtcbiAgZ2V0Q29uZmxpY3RzLFxuICBnZXRFcnJvcnMsXG4gIGdldFF1b3RhRXJyb3JzLFxuICBnZXROZXR3b3JrRXJyb3JzLFxuICBnZXRDcmVhdGVkLFxuICBnZXRVcGRhdGVkLFxuICBnZXRQcm9jZXNzZWQsXG4gIGdldFN1Y2Nlc3NmdWxcbn1cblxuLy8gRE9NIGhlbHBlcnNcbmNvbnN0IGV4dHJhY3RGaWxlc0VudHJpZXMgPSBpdGVtcyA9PiB7XG4gIGxldCByZXN1bHRzID0gW11cbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBpdGVtcy5sZW5ndGg7IGkgKz0gMSkge1xuICAgIGNvbnN0IGl0ZW0gPSBpdGVtc1tpXVxuICAgIGlmIChpdGVtLndlYmtpdEdldEFzRW50cnkgIT0gbnVsbCAmJiBpdGVtLndlYmtpdEdldEFzRW50cnkoKSkge1xuICAgICAgY29uc3QgZW50cnkgPSBpdGVtLndlYmtpdEdldEFzRW50cnkoKVxuICAgICAgcmVzdWx0cy5wdXNoKHtcbiAgICAgICAgZmlsZTogaXRlbS5nZXRBc0ZpbGUoKSxcbiAgICAgICAgaXNEaXJlY3Rvcnk6IGVudHJ5LmlzRGlyZWN0b3J5ID09PSB0cnVlLFxuICAgICAgICBlbnRyeVxuICAgICAgfSlcbiAgICB9IGVsc2Uge1xuICAgICAgcmVzdWx0cy5wdXNoKHsgZmlsZTogaXRlbSwgaXNEaXJlY3Rvcnk6IGZhbHNlLCBlbnRyeTogbnVsbCB9KVxuICAgIH1cbiAgfVxuXG4gIGlmIChyZXN1bHRzLmxlbmd0aCA9PT0gMCkge1xuICAgIGxvZ2dlci53YXJuKCdVcGxvYWQgbW9kdWxlIGZpbGVzIGVudHJpZXMgZXh0cmFjdGlvbjogbm8gZmlsZSBlbnRyeScpXG4gIH1cblxuICByZXR1cm4gcmVzdWx0c1xufVxuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBSUE7QUFFQTtBQUtBO0FBSEE7QUFDQTtBQUNBO0FBR0E7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFYQTtBQWNBO0FBQ0E7QUFDQTtBQUFBO0FBRUE7QUFDQTtBQUhBO0FBQUE7QUFDQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBUkE7QUFVQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFEQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFMQTtBQU9BO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUVBO0FBQ0E7QUFIQTtBQUFBO0FBQ0E7QUFLQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUFBO0FBQUE7QUFDQTtBQUVBO0FBQ0E7QUFsQkE7QUFvQkE7QUFFQTtBQUFBO0FBQUE7QUFFQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUxBO0FBQUE7QUFRQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBTUE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUZBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUNBO0FBREE7QUFPQTtBQUFBO0FBQUE7QUFDQTtBQVJBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUNBO0FBREE7QUFZQTtBQVpBO0FBQUE7QUFDQTtBQURBO0FBYUE7QUFiQTtBQWVBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFoQkE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFrQkE7QUFDQTtBQUZBO0FBQ0E7QUFsQkE7QUFpQkE7QUFJQTtBQXJCQTtBQUFBO0FBQ0E7QUFEQTtBQXVCQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBdkJBO0FBQUE7QUE4QkE7QUFDQTtBQUZBO0FBQ0E7QUE5QkE7QUE2QkE7QUFNQTtBQUNBO0FBcENBO0FBcUNBO0FBQUE7QUFBQTtBQUFBO0FBckNBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQXVDQTtBQUNBO0FBeENBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBMENBO0FBMUNBO0FBQUE7QUE0Q0E7QUFDQTtBQUNBO0FBSEE7QUFDQTtBQTVDQTtBQTJDQTtBQUtBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBbERBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQW9EQTtBQUNBO0FBckRBO0FBdURBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUZBO0FBS0E7QUFLQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQXhFQTtBQXlFQTtBQU1BO0FBQUE7QUFBQTtBQUNBO0FBaEZBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFQQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUF5RkE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFJQTtBQUpBO0FBQUE7QUFDQTtBQURBO0FBTUE7QUFDQTtBQVBBO0FBU0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBRkE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQ0E7QUFEQTtBQUlBO0FBSkE7QUFBQTtBQU1BO0FBQ0E7QUFGQTtBQUNBO0FBTkE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBV0E7QUFDQTtBQUZBO0FBQ0E7QUFYQTtBQUNBO0FBREE7QUFBQTtBQUNBO0FBREE7QUFnQkE7QUFDQTtBQWpCQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQWlCQTtBQUNBO0FBQ0E7QUE3QkE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUE4QkE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBR0E7QUFBQTtBQUFBO0FBQ0E7QUFKQTtBQUNBO0FBREE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBTUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQWVBO0FBQ0E7QUFoQkE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFzQkE7QUFDQTtBQXhCQTtBQUNBO0FBREE7QUE4QkE7QUFDQTtBQS9CQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBZ0NBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQUhBO0FBQ0E7QUFGQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQVdBO0FBOUNBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQWtEQTtBQUFBO0FBQUE7QUFDQTtBQW5EQTtBQWdEQTtBQWhEQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUFBO0FBd0RBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUtBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFOQTtBQUdBO0FBSEE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFBQTtBQVVBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFLQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQURBO0FBQUE7QUFDQTtBQURBO0FBS0E7QUFDQTtBQU5BO0FBQUE7QUFDQTtBQURBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFNQTtBQVBBO0FBU0E7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQUNBO0FBVkE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFDQTtBQURBO0FBZUE7QUFmQTtBQUFBO0FBQ0E7QUFEQTtBQWdCQTtBQWhCQTtBQUFBO0FBc0JBO0FBRkE7QUFDQTtBQXJCQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQTJCQTtBQUZBO0FBQ0E7QUExQkE7QUE4QkE7QUE5QkE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBZ0NBO0FBQ0E7QUFqQ0E7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFDQTtBQURBO0FBQUE7QUFDQTtBQURBO0FBQ0E7QUFEQTtBQUNBO0FBREE7QUFzQ0E7QUFDQTtBQXZDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBTkE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQThDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUZBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBSUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQU9BO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQU1BO0FBQUE7QUFBQTtBQUNBO0FBWkE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQVJBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUF1QkE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUVBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFWQTtBQUNBO0FBWUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBRUE7QUFBQTtBQUNBO0FBQUE7QUFEQTtBQUdBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVJBO0FBQ0E7QUFXQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBS0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/drive/web/modules/upload/index.js\n");

/***/ })

})