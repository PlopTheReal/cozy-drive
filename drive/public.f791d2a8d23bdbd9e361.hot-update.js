webpackHotUpdate("public",{

/***/ "./src/drive/web/modules/upload/index.js":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"ADD_TO_UPLOAD_QUEUE\", function() { return ADD_TO_UPLOAD_QUEUE; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"status\", function() { return status; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"queue\", function() { return queue; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"uploadProgress\", function() { return uploadProgress; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"processNextFile\", function() { return processNextFile; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"overwriteFile\", function() { return overwriteFile; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"uploadFilesFromNative\", function() { return uploadFilesFromNative; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"removeFileToUploadQueue\", function() { return removeFileToUploadQueue; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"addToUploadQueue\", function() { return addToUploadQueue; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"purgeUploadQueue\", function() { return purgeUploadQueue; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"onQueueEmpty\", function() { return onQueueEmpty; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"getUploadQueue\", function() { return getUploadQueue; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"getProcessed\", function() { return getProcessed; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"getSuccessful\", function() { return getSuccessful; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"selectors\", function() { return selectors; });\n/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"./node_modules/@babel/runtime/regenerator/index.js\");\n/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(\"./node_modules/@babel/runtime/helpers/asyncToGenerator.js\");\n/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(\"./node_modules/@babel/runtime/helpers/toConsumableArray.js\");\n/* harmony import */ var _babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _babel_runtime_helpers_objectSpread__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(\"./node_modules/@babel/runtime/helpers/objectSpread.js\");\n/* harmony import */ var _babel_runtime_helpers_objectSpread__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_objectSpread__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var redux__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(\"./node_modules/redux/es/index.js\");\n/* harmony import */ var lib_logger__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(\"./src/lib/logger.js\");\n/* harmony import */ var models__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(\"./src/models/index.js\");\n/* harmony import */ var drive_lib_reporter__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(\"./src/drive/lib/reporter.js\");\n/* harmony import */ var drive_constants_config__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(\"./src/drive/constants/config.js\");\n/* harmony import */ var _UploadQueue__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(\"./src/drive/web/modules/upload/UploadQueue.jsx\");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"UploadQueue\", function() { return _UploadQueue__WEBPACK_IMPORTED_MODULE_9__[\"default\"]; });\n\n/* harmony import */ var drive_lib_encryption__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(\"./src/drive/lib/encryption.js\");\n/* harmony import */ var drive_lib_doctypes__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(\"./src/drive/lib/doctypes.js\");\n/* harmony import */ var cozy_client__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(\"./node_modules/cozy-client/dist/index.js\");\n/* harmony import */ var cozy_client__WEBPACK_IMPORTED_MODULE_12___default = /*#__PURE__*/__webpack_require__.n(cozy_client__WEBPACK_IMPORTED_MODULE_12__);\n\n\n\n\n\nfunction _createForOfIteratorHelper(o, allowArrayLike) { var it; if (typeof Symbol === \"undefined\" || o[Symbol.iterator] == null) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = o[Symbol.iterator](); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it.return != null) it.return(); } finally { if (didErr) throw err; } } }; }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\n\n\n\n\n\n\n\n\n\nvar _models$file = cozy_client__WEBPACK_IMPORTED_MODULE_12__[\"models\"].file,\n    doMobileUpload = _models$file.doMobileUpload,\n    readMobileFile = _models$file.readMobileFile,\n    uploadFileWithConflictStrategy = _models$file.uploadFileWithConflictStrategy;\n\nvar SLUG = 'upload';\nvar ADD_TO_UPLOAD_QUEUE = 'ADD_TO_UPLOAD_QUEUE';\nvar UPLOAD_FILE = 'UPLOAD_FILE';\nvar UPLOAD_PROGRESS = 'UPLOAD_PROGRESS';\nvar RECEIVE_UPLOAD_SUCCESS = 'RECEIVE_UPLOAD_SUCCESS';\nvar RECEIVE_UPLOAD_ERROR = 'RECEIVE_UPLOAD_ERROR';\nvar PURGE_UPLOAD_QUEUE = 'PURGE_UPLOAD_QUEUE';\nvar CANCEL = 'cancel';\nvar PENDING = 'pending';\nvar LOADING = 'loading';\nvar CREATED = 'created';\nvar UPDATED = 'updated';\nvar FAILED = 'failed';\nvar CONFLICT = 'conflict';\nvar QUOTA = 'quota';\nvar NETWORK = 'network';\nvar DONE_STATUSES = [CREATED, UPDATED];\nvar ERROR_STATUSES = [CONFLICT, NETWORK, QUOTA];\nvar status = {\n  CANCEL: CANCEL,\n  PENDING: PENDING,\n  LOADING: LOADING,\n  CREATED: CREATED,\n  UPDATED: UPDATED,\n  FAILED: FAILED,\n  CONFLICT: CONFLICT,\n  QUOTA: QUOTA,\n  NETWORK: NETWORK,\n  DONE_STATUSES: DONE_STATUSES,\n  ERROR_STATUSES: ERROR_STATUSES\n};\nvar CONFLICT_ERROR = 409;\n\nvar itemInitialState = function itemInitialState(item) {\n  return _babel_runtime_helpers_objectSpread__WEBPACK_IMPORTED_MODULE_3___default()({}, item, {\n    status: PENDING,\n    progress: null\n  });\n};\n\nvar getStatus = function getStatus(state, action) {\n  switch (action.type) {\n    case UPLOAD_FILE:\n      return LOADING;\n\n    case RECEIVE_UPLOAD_SUCCESS:\n      return action.isUpdate ? UPDATED : CREATED;\n\n    case RECEIVE_UPLOAD_ERROR:\n      return action.status;\n\n    default:\n      return state;\n  }\n};\n\nvar getSpeed = function getSpeed(state, action) {\n  var lastLoaded = state.loaded;\n  var lastUpdated = state.lastUpdated;\n  var now = action.date;\n  var nowLoaded = action.loaded;\n  return (nowLoaded - lastLoaded) / (now - lastUpdated) * 1000;\n};\n\nvar remainingTimes = [];\nvar averageRemainingTime = undefined;\nvar timeout = undefined;\n\nvar getProgress = function getProgress(state, action) {\n  console.log('get progress');\n\n  if (action.type === UPLOAD_PROGRESS) {\n    var speed = state ? getSpeed(state, action) : null;\n    var loaded = action.loaded;\n    var total = action.total;\n    var instantRemainingTime = speed && total && loaded ? (total - loaded) / speed : null;\n    console.log({\n      instantRemainingTime: instantRemainingTime\n    });\n\n    if (!averageRemainingTime) {\n      console.log('set default average remaining time');\n      averageRemainingTime = instantRemainingTime;\n    }\n\n    if (instantRemainingTime) {\n      remainingTimes.push(instantRemainingTime);\n      console.log('push in array');\n    }\n\n    if (!timeout) {\n      console.log('no timeout, j en set un');\n      timeout = setTimeout(function () {\n        console.log('tim out, je calcule');\n        averageRemainingTime = remainingTimes.reduce(function (a, b) {\n          return a + b;\n        }) / remainingTimes.length;\n        console.log({\n          averageRemainingTime: averageRemainingTime\n        });\n        clearTimeout(timeout);\n      }, 1000);\n    }\n\n    return {\n      loaded: loaded,\n      total: total,\n      lastUpdated: action.date,\n      speed: speed,\n      remainingTime: averageRemainingTime\n    };\n  } else if (action.type === RECEIVE_UPLOAD_SUCCESS || action.type === RECEIVE_UPLOAD_ERROR) {\n    return null;\n  } else {\n    return state;\n  }\n};\n\nvar item = function item(state) {\n  var action = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {\n    isUpdate: false\n  };\n  return _babel_runtime_helpers_objectSpread__WEBPACK_IMPORTED_MODULE_3___default()({}, state, {\n    status: getStatus(state.status, action),\n    progress: getProgress(state.progress, action)\n  });\n};\n\nvar queue = function queue() {\n  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n  var action = arguments.length > 1 ? arguments[1] : undefined;\n  console.log('in queue');\n\n  switch (action.type) {\n    case ADD_TO_UPLOAD_QUEUE:\n      return [].concat(_babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_2___default()(state.filter(function (i) {\n        return i.status !== CREATED;\n      })), _babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_2___default()(action.files.map(function (f) {\n        return itemInitialState(f);\n      })));\n\n    case PURGE_UPLOAD_QUEUE:\n      return [];\n\n    case UPLOAD_FILE:\n    case RECEIVE_UPLOAD_SUCCESS:\n    case RECEIVE_UPLOAD_ERROR:\n    case UPLOAD_PROGRESS:\n      console.log('in case');\n      return state.map(function (i) {\n        return i.file.name !== action.file.name ? i : item(i, action);\n      });\n\n    default:\n      return state;\n  }\n};\n/* harmony default export */ __webpack_exports__[\"default\"] = (Object(redux__WEBPACK_IMPORTED_MODULE_4__[\"combineReducers\"])({\n  queue: queue\n}));\nvar uploadProgress = function uploadProgress(file, event, date) {\n  return {\n    type: UPLOAD_PROGRESS,\n    file: file,\n    loaded: event.loaded,\n    total: event.total,\n    date: date || Date.now()\n  };\n};\nvar processNextFile = function processNextFile(fileUploadedCallback, queueCompletedCallback, dirID, sharingState, _ref) {\n  var client = _ref.client,\n      vaultClient = _ref.vaultClient;\n  return /*#__PURE__*/function () {\n    var _ref2 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee(dispatch, getState) {\n      var error, item, file, entry, isDirectory, encryptionKey, newDir, withProgress, uploadedFile, path, _uploadedFile, statusError, _status;\n\n      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              error = null;\n\n              if (client) {\n                _context.next = 3;\n                break;\n              }\n\n              throw new Error('Upload module needs a cozy-client instance to work. This instance should be made available by using the extraArgument function of redux-thunk');\n\n            case 3:\n              item = getUploadQueue(getState()).find(function (i) {\n                return i.status === PENDING;\n              });\n\n              if (item) {\n                _context.next = 6;\n                break;\n              }\n\n              return _context.abrupt(\"return\", dispatch(onQueueEmpty(queueCompletedCallback)));\n\n            case 6:\n              file = item.file, entry = item.entry, isDirectory = item.isDirectory;\n              _context.next = 9;\n              return Object(drive_lib_encryption__WEBPACK_IMPORTED_MODULE_10__[\"getEncryptionKeyFromDirId\"])(client, dirID);\n\n            case 9:\n              encryptionKey = _context.sent;\n              _context.prev = 10;\n              dispatch({\n                type: UPLOAD_FILE,\n                file: file\n              });\n\n              if (!(entry && isDirectory)) {\n                _context.next = 19;\n                break;\n              }\n\n              _context.next = 15;\n              return uploadDirectory(client, entry, dirID, {\n                vaultClient: vaultClient,\n                encryptionKey: encryptionKey\n              });\n\n            case 15:\n              newDir = _context.sent;\n              fileUploadedCallback(newDir);\n              _context.next = 24;\n              break;\n\n            case 19:\n              withProgress = {\n                onUploadProgress: function onUploadProgress(event) {\n                  dispatch(uploadProgress(file, event));\n                }\n              };\n              _context.next = 22;\n              return uploadFile(client, file, dirID, _babel_runtime_helpers_objectSpread__WEBPACK_IMPORTED_MODULE_3___default()({\n                vaultClient: vaultClient,\n                encryptionKey: encryptionKey\n              }, withProgress));\n\n            case 22:\n              uploadedFile = _context.sent;\n              fileUploadedCallback(uploadedFile);\n\n            case 24:\n              dispatch({\n                type: RECEIVE_UPLOAD_SUCCESS,\n                file: file\n              });\n              _context.next = 47;\n              break;\n\n            case 27:\n              _context.prev = 27;\n              _context.t0 = _context[\"catch\"](10);\n              error = _context.t0;\n\n              if (!(_context.t0.status === CONFLICT_ERROR)) {\n                _context.next = 46;\n                break;\n              }\n\n              _context.prev = 31;\n              _context.next = 34;\n              return models__WEBPACK_IMPORTED_MODULE_6__[\"CozyFile\"].getFullpath(dirID, file.name);\n\n            case 34:\n              path = _context.sent;\n              _context.next = 37;\n              return overwriteFile(client, file, path, {\n                onUploadProgress: function onUploadProgress(event) {\n                  dispatch(uploadProgress(file, event));\n                }\n              });\n\n            case 37:\n              _uploadedFile = _context.sent;\n              fileUploadedCallback(_uploadedFile);\n              dispatch({\n                type: RECEIVE_UPLOAD_SUCCESS,\n                file: file,\n                isUpdate: true\n              });\n              error = null;\n              _context.next = 46;\n              break;\n\n            case 43:\n              _context.prev = 43;\n              _context.t1 = _context[\"catch\"](31);\n              error = _context.t1;\n\n            case 46:\n              if (error) {\n                lib_logger__WEBPACK_IMPORTED_MODULE_5__[\"default\"].warn(error);\n                Object(drive_lib_reporter__WEBPACK_IMPORTED_MODULE_7__[\"logException\"])(\"Upload module catches an error when executing processNextFile(): \".concat(error));\n                statusError = {\n                  409: CONFLICT,\n                  413: QUOTA\n                };\n                _status = statusError[error.status] || /Failed to fetch$/.exec(error.toString()) && NETWORK || FAILED;\n                dispatch({\n                  type: RECEIVE_UPLOAD_ERROR,\n                  file: file,\n                  status: _status\n                });\n              }\n\n            case 47:\n              dispatch(processNextFile(fileUploadedCallback, queueCompletedCallback, dirID, sharingState, {\n                client: client,\n                vaultClient: vaultClient\n              }));\n\n            case 48:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[10, 27], [31, 43]]);\n    }));\n\n    return function (_x, _x2) {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n};\n\nvar getFileFromEntry = function getFileFromEntry(entry) {\n  return new Promise(function (resolve) {\n    return entry.file(resolve);\n  });\n};\n\nvar uploadDirectory = /*#__PURE__*/function () {\n  var _ref4 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee3(client, directory, dirID, _ref3) {\n    var vaultClient, encryptionKey, newDir, dirReader;\n    return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee3$(_context3) {\n      while (1) {\n        switch (_context3.prev = _context3.next) {\n          case 0:\n            vaultClient = _ref3.vaultClient, encryptionKey = _ref3.encryptionKey;\n            _context3.next = 3;\n            return createFolder(client, directory.name, dirID);\n\n          case 3:\n            newDir = _context3.sent;\n            dirReader = directory.createReader();\n            return _context3.abrupt(\"return\", new Promise(function (resolve) {\n              var entriesReader = /*#__PURE__*/function () {\n                var _ref5 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee2(entries) {\n                  var i, entry, file;\n                  return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee2$(_context2) {\n                    while (1) {\n                      switch (_context2.prev = _context2.next) {\n                        case 0:\n                          i = 0;\n\n                        case 1:\n                          if (!(i < entries.length)) {\n                            _context2.next = 17;\n                            break;\n                          }\n\n                          entry = entries[i];\n\n                          if (!entry.isFile) {\n                            _context2.next = 11;\n                            break;\n                          }\n\n                          _context2.next = 6;\n                          return getFileFromEntry(entry);\n\n                        case 6:\n                          file = _context2.sent;\n                          _context2.next = 9;\n                          return uploadFile(client, file, newDir.id, {\n                            vaultClient: vaultClient,\n                            encryptionKey: encryptionKey\n                          });\n\n                        case 9:\n                          _context2.next = 14;\n                          break;\n\n                        case 11:\n                          if (!entry.isDirectory) {\n                            _context2.next = 14;\n                            break;\n                          }\n\n                          _context2.next = 14;\n                          return uploadDirectory(client, entry, newDir.id, {\n                            vaultClient: vaultClient,\n                            encryptionKey: encryptionKey\n                          });\n\n                        case 14:\n                          i += 1;\n                          _context2.next = 1;\n                          break;\n\n                        case 17:\n                          resolve(newDir);\n\n                        case 18:\n                        case \"end\":\n                          return _context2.stop();\n                      }\n                    }\n                  }, _callee2);\n                }));\n\n                return function entriesReader(_x7) {\n                  return _ref5.apply(this, arguments);\n                };\n              }();\n\n              dirReader.readEntries(entriesReader);\n            }));\n\n          case 6:\n          case \"end\":\n            return _context3.stop();\n        }\n      }\n    }, _callee3);\n  }));\n\n  return function uploadDirectory(_x3, _x4, _x5, _x6) {\n    return _ref4.apply(this, arguments);\n  };\n}();\n\nvar createFolder = /*#__PURE__*/function () {\n  var _ref6 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee4(client, name, dirID) {\n    var resp;\n    return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee4$(_context4) {\n      while (1) {\n        switch (_context4.prev = _context4.next) {\n          case 0:\n            _context4.next = 2;\n            return client.collection(drive_lib_doctypes__WEBPACK_IMPORTED_MODULE_11__[\"DOCTYPE_FILES\"]).createDirectory({\n              name: name,\n              dirId: dirID\n            });\n\n          case 2:\n            resp = _context4.sent;\n            return _context4.abrupt(\"return\", resp.data);\n\n          case 4:\n          case \"end\":\n            return _context4.stop();\n        }\n      }\n    }, _callee4);\n  }));\n\n  return function createFolder(_x8, _x9, _x10) {\n    return _ref6.apply(this, arguments);\n  };\n}();\n\nvar uploadFile = /*#__PURE__*/function () {\n  var _ref7 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee6(client, file, dirID) {\n    var options,\n        _yield$client$getStac,\n        diskUsage,\n        error,\n        onUploadProgress,\n        encryptionKey,\n        vaultClient,\n        fr,\n        resp,\n        _args6 = arguments;\n\n    return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee6$(_context6) {\n      while (1) {\n        switch (_context6.prev = _context6.next) {\n          case 0:\n            options = _args6.length > 3 && _args6[3] !== undefined ? _args6[3] : {};\n\n            if (!window.chrome) {\n              _context6.next = 11;\n              break;\n            }\n\n            _context6.next = 4;\n            return client.getStackClient().fetchJSON('GET', '/settings/disk-usage');\n\n          case 4:\n            _yield$client$getStac = _context6.sent;\n            diskUsage = _yield$client$getStac.data;\n\n            if (!diskUsage.attributes.quota) {\n              _context6.next = 11;\n              break;\n            }\n\n            if (!(parseInt(diskUsage.attributes.used) + parseInt(file.size) > parseInt(diskUsage.attributes.quota))) {\n              _context6.next = 11;\n              break;\n            }\n\n            error = new Error('Payload Too Large');\n            error.status = 413;\n            throw error;\n\n          case 11:\n            onUploadProgress = options.onUploadProgress, encryptionKey = options.encryptionKey, vaultClient = options.vaultClient;\n\n            if (!(encryptionKey && vaultClient)) {\n              _context6.next = 18;\n              break;\n            }\n\n            // TODO: use web worker\n            fr = new FileReader();\n            fr.onloadend = /*#__PURE__*/_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee5() {\n              return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee5$(_context5) {\n                while (1) {\n                  switch (_context5.prev = _context5.next) {\n                    case 0:\n                      return _context5.abrupt(\"return\", Object(drive_lib_encryption__WEBPACK_IMPORTED_MODULE_10__[\"encryptAndUploadNewFile\"])(client, vaultClient, {\n                        file: fr.result,\n                        encryptionKey: encryptionKey,\n                        fileOptions: {\n                          name: file.name,\n                          dirID: dirID,\n                          onUploadProgress: onUploadProgress\n                        }\n                      }));\n\n                    case 1:\n                    case \"end\":\n                      return _context5.stop();\n                  }\n                }\n              }, _callee5);\n            }));\n            fr.readAsArrayBuffer(file);\n            _context6.next = 22;\n            break;\n\n          case 18:\n            _context6.next = 20;\n            return client.collection(drive_lib_doctypes__WEBPACK_IMPORTED_MODULE_11__[\"DOCTYPE_FILES\"]).createFile(file, {\n              dirId: dirID,\n              onUploadProgress: onUploadProgress\n            });\n\n          case 20:\n            resp = _context6.sent;\n            return _context6.abrupt(\"return\", resp.data);\n\n          case 22:\n          case \"end\":\n            return _context6.stop();\n        }\n      }\n    }, _callee6);\n  }));\n\n  return function uploadFile(_x11, _x12, _x13) {\n    return _ref7.apply(this, arguments);\n  };\n}();\n/*\n * @function\n * @param {Object} client - A CozyClient instance\n * @param {Object} file - The uploaded javascript File object\n * @param {string} path - The file's path in the cozy\n * @param {{onUploadProgress}} options\n * @return {Object} - The updated io.cozy.files\n */\n\n\nvar overwriteFile = /*#__PURE__*/function () {\n  var _ref9 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee7(client, file, path) {\n    var options,\n        statResp,\n        _statResp$data,\n        fileId,\n        dirId,\n        resp,\n        _args7 = arguments;\n\n    return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee7$(_context7) {\n      while (1) {\n        switch (_context7.prev = _context7.next) {\n          case 0:\n            options = _args7.length > 3 && _args7[3] !== undefined ? _args7[3] : {};\n            _context7.next = 3;\n            return client.collection(drive_lib_doctypes__WEBPACK_IMPORTED_MODULE_11__[\"DOCTYPE_FILES\"]).statByPath(path);\n\n          case 3:\n            statResp = _context7.sent;\n            _statResp$data = statResp.data, fileId = _statResp$data.id, dirId = _statResp$data.dir_id;\n            _context7.next = 7;\n            return client.collection(drive_lib_doctypes__WEBPACK_IMPORTED_MODULE_11__[\"DOCTYPE_FILES\"]).updateFile(file, {\n              dirId: dirId,\n              fileId: fileId,\n              options: options\n            });\n\n          case 7:\n            resp = _context7.sent;\n            return _context7.abrupt(\"return\", resp.data);\n\n          case 9:\n          case \"end\":\n            return _context7.stop();\n        }\n      }\n    }, _callee7);\n  }));\n\n  return function overwriteFile(_x14, _x15, _x16) {\n    return _ref9.apply(this, arguments);\n  };\n}();\nvar uploadFilesFromNative = function uploadFilesFromNative(files, folderId, uploadFilesSuccessCallback, _ref10) {\n  var client = _ref10.client,\n      vaultClient = _ref10.vaultClient;\n  return /*#__PURE__*/function () {\n    var _ref11 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee8(dispatch) {\n      var encryptionKey, _iterator, _step, file, fileOpts, blobFile, encryptedFile;\n\n      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee8$(_context8) {\n        while (1) {\n          switch (_context8.prev = _context8.next) {\n            case 0:\n              dispatch({\n                type: ADD_TO_UPLOAD_QUEUE,\n                files: files\n              });\n              _context8.next = 3;\n              return Object(drive_lib_encryption__WEBPACK_IMPORTED_MODULE_10__[\"getEncryptionKeyFromDirId\"])(client, folderId);\n\n            case 3:\n              encryptionKey = _context8.sent;\n              // !TODO Promise.All to use parallelization\n              _iterator = _createForOfIteratorHelper(files);\n              _context8.prev = 5;\n\n              _iterator.s();\n\n            case 7:\n              if ((_step = _iterator.n()).done) {\n                _context8.next = 32;\n                break;\n              }\n\n              file = _step.value;\n              _context8.prev = 9;\n              fileOpts = {\n                name: file.file.name,\n                dirId: folderId,\n                conflictStrategy: 'rename'\n              };\n\n              if (!encryptionKey) {\n                _context8.next = 22;\n                break;\n              }\n\n              _context8.next = 14;\n              return readMobileFile(file.file.fileUrl);\n\n            case 14:\n              blobFile = _context8.sent;\n              _context8.next = 17;\n              return vaultClient.encryptFile(blobFile, encryptionKey);\n\n            case 17:\n              encryptedFile = _context8.sent;\n              _context8.next = 20;\n              return uploadFileWithConflictStrategy(client, encryptedFile, _babel_runtime_helpers_objectSpread__WEBPACK_IMPORTED_MODULE_3___default()({}, fileOpts, {\n                contentType: drive_constants_config__WEBPACK_IMPORTED_MODULE_8__[\"ENCRYPTION_MIME_TYPE\"]\n              }));\n\n            case 20:\n              _context8.next = 24;\n              break;\n\n            case 22:\n              _context8.next = 24;\n              return doMobileUpload(client, file.file.fileUrl, _babel_runtime_helpers_objectSpread__WEBPACK_IMPORTED_MODULE_3___default()({}, fileOpts, {\n                contentType: file.file.type\n              }));\n\n            case 24:\n              dispatch(removeFileToUploadQueue(file.file));\n              _context8.next = 30;\n              break;\n\n            case 27:\n              _context8.prev = 27;\n              _context8.t0 = _context8[\"catch\"](9);\n              lib_logger__WEBPACK_IMPORTED_MODULE_5__[\"default\"].error(\"Uploading files from native failed with file \".concat(file.file, \": \").concat(_context8.t0));\n\n            case 30:\n              _context8.next = 7;\n              break;\n\n            case 32:\n              _context8.next = 37;\n              break;\n\n            case 34:\n              _context8.prev = 34;\n              _context8.t1 = _context8[\"catch\"](5);\n\n              _iterator.e(_context8.t1);\n\n            case 37:\n              _context8.prev = 37;\n\n              _iterator.f();\n\n              return _context8.finish(37);\n\n            case 40:\n              if (uploadFilesSuccessCallback) uploadFilesSuccessCallback();\n\n            case 41:\n            case \"end\":\n              return _context8.stop();\n          }\n        }\n      }, _callee8, null, [[5, 34, 37, 40], [9, 27]]);\n    }));\n\n    return function (_x17) {\n      return _ref11.apply(this, arguments);\n    };\n  }();\n};\nvar removeFileToUploadQueue = function removeFileToUploadQueue(file) {\n  return /*#__PURE__*/function () {\n    var _ref12 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee9(dispatch) {\n      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee9$(_context9) {\n        while (1) {\n          switch (_context9.prev = _context9.next) {\n            case 0:\n              dispatch({\n                type: RECEIVE_UPLOAD_SUCCESS,\n                file: file,\n                isUpdate: true\n              });\n\n            case 1:\n            case \"end\":\n              return _context9.stop();\n          }\n        }\n      }, _callee9);\n    }));\n\n    return function (_x18) {\n      return _ref12.apply(this, arguments);\n    };\n  }();\n};\nvar addToUploadQueue = function addToUploadQueue(files, dirID, sharingState, fileUploadedCallback, queueCompletedCallback, _ref13) {\n  var client = _ref13.client,\n      vaultClient = _ref13.vaultClient;\n  return /*#__PURE__*/function () {\n    var _ref14 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee10(dispatch) {\n      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee10$(_context10) {\n        while (1) {\n          switch (_context10.prev = _context10.next) {\n            case 0:\n              dispatch({\n                type: ADD_TO_UPLOAD_QUEUE,\n                files: extractFilesEntries(files)\n              });\n              dispatch(processNextFile(fileUploadedCallback, queueCompletedCallback, dirID, sharingState, {\n                client: client,\n                vaultClient: vaultClient\n              }));\n\n            case 2:\n            case \"end\":\n              return _context10.stop();\n          }\n        }\n      }, _callee10);\n    }));\n\n    return function (_x19) {\n      return _ref14.apply(this, arguments);\n    };\n  }();\n};\nvar purgeUploadQueue = function purgeUploadQueue() {\n  return {\n    type: PURGE_UPLOAD_QUEUE\n  };\n};\nvar onQueueEmpty = function onQueueEmpty(callback) {\n  return function (dispatch, getState) {\n    var queue = getUploadQueue(getState());\n    var quotas = getQuotaErrors(queue);\n    var conflicts = getConflicts(queue);\n    var created = getCreated(queue);\n    var updated = getUpdated(queue);\n    var networkErrors = getNetworkErrors(queue);\n    var errors = getErrors(queue);\n    return callback(created, quotas, conflicts, networkErrors, errors, updated);\n  };\n}; // selectors\n\nvar filterByStatus = function filterByStatus(queue, status) {\n  return queue.filter(function (f) {\n    return f.status === status;\n  });\n};\n\nvar getConflicts = function getConflicts(queue) {\n  return filterByStatus(queue, CONFLICT);\n};\n\nvar getErrors = function getErrors(queue) {\n  return filterByStatus(queue, FAILED);\n};\n\nvar getQuotaErrors = function getQuotaErrors(queue) {\n  return filterByStatus(queue, QUOTA);\n};\n\nvar getNetworkErrors = function getNetworkErrors(queue) {\n  return filterByStatus(queue, NETWORK);\n};\n\nvar getCreated = function getCreated(queue) {\n  return filterByStatus(queue, CREATED);\n};\n\nvar getUpdated = function getUpdated(queue) {\n  return filterByStatus(queue, UPDATED);\n};\n\nvar getUploadQueue = function getUploadQueue(state) {\n  return state[SLUG].queue;\n};\nvar getProcessed = function getProcessed(state) {\n  return getUploadQueue(state).filter(function (f) {\n    return f.status !== PENDING;\n  });\n};\nvar getSuccessful = function getSuccessful(state) {\n  var queue = getUploadQueue(state);\n  return queue.filter(function (f) {\n    return [CREATED, UPDATED].includes(f.status);\n  });\n};\nvar selectors = {\n  getConflicts: getConflicts,\n  getErrors: getErrors,\n  getQuotaErrors: getQuotaErrors,\n  getNetworkErrors: getNetworkErrors,\n  getCreated: getCreated,\n  getUpdated: getUpdated,\n  getProcessed: getProcessed,\n  getSuccessful: getSuccessful\n}; // DOM helpers\n\nvar extractFilesEntries = function extractFilesEntries(items) {\n  var results = [];\n\n  for (var i = 0; i < items.length; i += 1) {\n    var _item = items[i];\n\n    if (_item.webkitGetAsEntry != null && _item.webkitGetAsEntry()) {\n      var entry = _item.webkitGetAsEntry();\n\n      results.push({\n        file: _item.getAsFile(),\n        isDirectory: entry.isDirectory === true,\n        entry: entry\n      });\n    } else {\n      results.push({\n        file: _item,\n        isDirectory: false,\n        entry: null\n      });\n    }\n  }\n\n  if (results.length === 0) {\n    lib_logger__WEBPACK_IMPORTED_MODULE_5__[\"default\"].warn('Upload module files entries extraction: no file entry');\n  }\n\n  return results;\n};//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvZHJpdmUvd2ViL21vZHVsZXMvdXBsb2FkL2luZGV4LmpzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vc3JjL2RyaXZlL3dlYi9tb2R1bGVzL3VwbG9hZC9pbmRleC5qcz9kOTRkIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGNvbWJpbmVSZWR1Y2VycyB9IGZyb20gJ3JlZHV4J1xuXG5pbXBvcnQgbG9nZ2VyIGZyb20gJ2xpYi9sb2dnZXInXG5pbXBvcnQgeyBDb3p5RmlsZSB9IGZyb20gJ21vZGVscydcblxuaW1wb3J0IHsgbG9nRXhjZXB0aW9uIH0gZnJvbSAnZHJpdmUvbGliL3JlcG9ydGVyJ1xuaW1wb3J0IHsgRU5DUllQVElPTl9NSU1FX1RZUEUgfSBmcm9tICdkcml2ZS9jb25zdGFudHMvY29uZmlnJ1xuaW1wb3J0IFVwbG9hZFF1ZXVlIGZyb20gJy4vVXBsb2FkUXVldWUnXG5pbXBvcnQge1xuICBlbmNyeXB0QW5kVXBsb2FkTmV3RmlsZSxcbiAgZ2V0RW5jcnlwdGlvbktleUZyb21EaXJJZFxufSBmcm9tICdkcml2ZS9saWIvZW5jcnlwdGlvbidcbmltcG9ydCB7IERPQ1RZUEVfRklMRVMgfSBmcm9tICdkcml2ZS9saWIvZG9jdHlwZXMnXG5cbmltcG9ydCB7IG1vZGVscyB9IGZyb20gJ2NvenktY2xpZW50J1xuY29uc3Qge1xuICBkb01vYmlsZVVwbG9hZCxcbiAgcmVhZE1vYmlsZUZpbGUsXG4gIHVwbG9hZEZpbGVXaXRoQ29uZmxpY3RTdHJhdGVneVxufSA9IG1vZGVscy5maWxlXG5cbmV4cG9ydCB7IFVwbG9hZFF1ZXVlIH1cblxuY29uc3QgU0xVRyA9ICd1cGxvYWQnXG5cbmV4cG9ydCBjb25zdCBBRERfVE9fVVBMT0FEX1FVRVVFID0gJ0FERF9UT19VUExPQURfUVVFVUUnXG5jb25zdCBVUExPQURfRklMRSA9ICdVUExPQURfRklMRSdcbmNvbnN0IFVQTE9BRF9QUk9HUkVTUyA9ICdVUExPQURfUFJPR1JFU1MnXG5jb25zdCBSRUNFSVZFX1VQTE9BRF9TVUNDRVNTID0gJ1JFQ0VJVkVfVVBMT0FEX1NVQ0NFU1MnXG5jb25zdCBSRUNFSVZFX1VQTE9BRF9FUlJPUiA9ICdSRUNFSVZFX1VQTE9BRF9FUlJPUidcbmNvbnN0IFBVUkdFX1VQTE9BRF9RVUVVRSA9ICdQVVJHRV9VUExPQURfUVVFVUUnXG5cbmNvbnN0IENBTkNFTCA9ICdjYW5jZWwnXG5jb25zdCBQRU5ESU5HID0gJ3BlbmRpbmcnXG5jb25zdCBMT0FESU5HID0gJ2xvYWRpbmcnXG5jb25zdCBDUkVBVEVEID0gJ2NyZWF0ZWQnXG5jb25zdCBVUERBVEVEID0gJ3VwZGF0ZWQnXG5jb25zdCBGQUlMRUQgPSAnZmFpbGVkJ1xuY29uc3QgQ09ORkxJQ1QgPSAnY29uZmxpY3QnXG5jb25zdCBRVU9UQSA9ICdxdW90YSdcbmNvbnN0IE5FVFdPUksgPSAnbmV0d29yaydcbmNvbnN0IERPTkVfU1RBVFVTRVMgPSBbQ1JFQVRFRCwgVVBEQVRFRF1cbmNvbnN0IEVSUk9SX1NUQVRVU0VTID0gW0NPTkZMSUNULCBORVRXT1JLLCBRVU9UQV1cblxuZXhwb3J0IGNvbnN0IHN0YXR1cyA9IHtcbiAgQ0FOQ0VMLFxuICBQRU5ESU5HLFxuICBMT0FESU5HLFxuICBDUkVBVEVELFxuICBVUERBVEVELFxuICBGQUlMRUQsXG4gIENPTkZMSUNULFxuICBRVU9UQSxcbiAgTkVUV09SSyxcbiAgRE9ORV9TVEFUVVNFUyxcbiAgRVJST1JfU1RBVFVTRVNcbn1cblxuY29uc3QgQ09ORkxJQ1RfRVJST1IgPSA0MDlcblxuY29uc3QgaXRlbUluaXRpYWxTdGF0ZSA9IGl0ZW0gPT4gKHtcbiAgLi4uaXRlbSxcbiAgc3RhdHVzOiBQRU5ESU5HLFxuICBwcm9ncmVzczogbnVsbFxufSlcblxuY29uc3QgZ2V0U3RhdHVzID0gKHN0YXRlLCBhY3Rpb24pID0+IHtcbiAgc3dpdGNoIChhY3Rpb24udHlwZSkge1xuICAgIGNhc2UgVVBMT0FEX0ZJTEU6XG4gICAgICByZXR1cm4gTE9BRElOR1xuICAgIGNhc2UgUkVDRUlWRV9VUExPQURfU1VDQ0VTUzpcbiAgICAgIHJldHVybiBhY3Rpb24uaXNVcGRhdGUgPyBVUERBVEVEIDogQ1JFQVRFRFxuICAgIGNhc2UgUkVDRUlWRV9VUExPQURfRVJST1I6XG4gICAgICByZXR1cm4gYWN0aW9uLnN0YXR1c1xuICAgIGRlZmF1bHQ6XG4gICAgICByZXR1cm4gc3RhdGVcbiAgfVxufVxuXG5jb25zdCBnZXRTcGVlZCA9IChzdGF0ZSwgYWN0aW9uKSA9PiB7XG4gIGNvbnN0IGxhc3RMb2FkZWQgPSBzdGF0ZS5sb2FkZWRcbiAgY29uc3QgbGFzdFVwZGF0ZWQgPSBzdGF0ZS5sYXN0VXBkYXRlZFxuICBjb25zdCBub3cgPSBhY3Rpb24uZGF0ZVxuICBjb25zdCBub3dMb2FkZWQgPSBhY3Rpb24ubG9hZGVkXG4gIHJldHVybiAoKG5vd0xvYWRlZCAtIGxhc3RMb2FkZWQpIC8gKG5vdyAtIGxhc3RVcGRhdGVkKSkgKiAxMDAwXG59XG5cbmxldCByZW1haW5pbmdUaW1lcyA9IFtdXG5sZXQgYXZlcmFnZVJlbWFpbmluZ1RpbWUgPSB1bmRlZmluZWRcbmxldCB0aW1lb3V0ID0gdW5kZWZpbmVkXG5cbmNvbnN0IGdldFByb2dyZXNzID0gKHN0YXRlLCBhY3Rpb24pID0+IHtcbiAgY29uc29sZS5sb2coJ2dldCBwcm9ncmVzcycpXG5cbiAgaWYgKGFjdGlvbi50eXBlID09PSBVUExPQURfUFJPR1JFU1MpIHtcbiAgICBjb25zdCBzcGVlZCA9IHN0YXRlID8gZ2V0U3BlZWQoc3RhdGUsIGFjdGlvbikgOiBudWxsXG4gICAgY29uc3QgbG9hZGVkID0gYWN0aW9uLmxvYWRlZFxuICAgIGNvbnN0IHRvdGFsID0gYWN0aW9uLnRvdGFsXG4gICAgY29uc3QgaW5zdGFudFJlbWFpbmluZ1RpbWUgPVxuICAgICAgc3BlZWQgJiYgdG90YWwgJiYgbG9hZGVkID8gKHRvdGFsIC0gbG9hZGVkKSAvIHNwZWVkIDogbnVsbFxuICAgIGNvbnNvbGUubG9nKHsgaW5zdGFudFJlbWFpbmluZ1RpbWUgfSlcblxuICAgIGlmICghYXZlcmFnZVJlbWFpbmluZ1RpbWUpIHtcbiAgICAgIGNvbnNvbGUubG9nKCdzZXQgZGVmYXVsdCBhdmVyYWdlIHJlbWFpbmluZyB0aW1lJylcbiAgICAgIGF2ZXJhZ2VSZW1haW5pbmdUaW1lID0gaW5zdGFudFJlbWFpbmluZ1RpbWVcbiAgICB9XG5cbiAgICBpZiAoaW5zdGFudFJlbWFpbmluZ1RpbWUpIHtcbiAgICAgIHJlbWFpbmluZ1RpbWVzLnB1c2goaW5zdGFudFJlbWFpbmluZ1RpbWUpXG4gICAgICBjb25zb2xlLmxvZygncHVzaCBpbiBhcnJheScpXG4gICAgfVxuXG4gICAgaWYgKCF0aW1lb3V0KSB7XG4gICAgICBjb25zb2xlLmxvZygnbm8gdGltZW91dCwgaiBlbiBzZXQgdW4nKVxuICAgICAgdGltZW91dCA9IHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICBjb25zb2xlLmxvZygndGltIG91dCwgamUgY2FsY3VsZScpXG5cbiAgICAgICAgYXZlcmFnZVJlbWFpbmluZ1RpbWUgPSByZW1haW5pbmdUaW1lcy5yZWR1Y2UoKGEsIGIpID0+IGEgKyBiKSAvIHJlbWFpbmluZ1RpbWVzLmxlbmd0aFxuICAgICAgICBjb25zb2xlLmxvZyh7IGF2ZXJhZ2VSZW1haW5pbmdUaW1lIH0pXG5cbiAgICAgICAgY2xlYXJUaW1lb3V0KHRpbWVvdXQpXG4gICAgICB9LCAxMDAwKVxuICAgIH1cblxuICAgIHJldHVybiB7XG4gICAgICBsb2FkZWQsXG4gICAgICB0b3RhbCxcbiAgICAgIGxhc3RVcGRhdGVkOiBhY3Rpb24uZGF0ZSxcbiAgICAgIHNwZWVkLFxuICAgICAgcmVtYWluaW5nVGltZTogYXZlcmFnZVJlbWFpbmluZ1RpbWVcbiAgICB9XG4gIH0gZWxzZSBpZiAoXG4gICAgYWN0aW9uLnR5cGUgPT09IFJFQ0VJVkVfVVBMT0FEX1NVQ0NFU1MgfHxcbiAgICBhY3Rpb24udHlwZSA9PT0gUkVDRUlWRV9VUExPQURfRVJST1JcbiAgKSB7XG4gICAgcmV0dXJuIG51bGxcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gc3RhdGVcbiAgfVxufVxuXG5jb25zdCBpdGVtID0gKHN0YXRlLCBhY3Rpb24gPSB7IGlzVXBkYXRlOiBmYWxzZSB9KSA9PiAoe1xuICAuLi5zdGF0ZSxcbiAgc3RhdHVzOiBnZXRTdGF0dXMoc3RhdGUuc3RhdHVzLCBhY3Rpb24pLFxuICBwcm9ncmVzczogZ2V0UHJvZ3Jlc3Moc3RhdGUucHJvZ3Jlc3MsIGFjdGlvbilcbn0pXG5cbmV4cG9ydCBjb25zdCBxdWV1ZSA9IChzdGF0ZSA9IFtdLCBhY3Rpb24pID0+IHtcbiAgY29uc29sZS5sb2coJ2luIHF1ZXVlJylcblxuICBzd2l0Y2ggKGFjdGlvbi50eXBlKSB7XG4gICAgY2FzZSBBRERfVE9fVVBMT0FEX1FVRVVFOlxuICAgICAgcmV0dXJuIFtcbiAgICAgICAgLi4uc3RhdGUuZmlsdGVyKGkgPT4gaS5zdGF0dXMgIT09IENSRUFURUQpLFxuICAgICAgICAuLi5hY3Rpb24uZmlsZXMubWFwKGYgPT4gaXRlbUluaXRpYWxTdGF0ZShmKSlcbiAgICAgIF1cbiAgICBjYXNlIFBVUkdFX1VQTE9BRF9RVUVVRTpcbiAgICAgIHJldHVybiBbXVxuICAgIGNhc2UgVVBMT0FEX0ZJTEU6XG4gICAgY2FzZSBSRUNFSVZFX1VQTE9BRF9TVUNDRVNTOlxuICAgIGNhc2UgUkVDRUlWRV9VUExPQURfRVJST1I6XG4gICAgY2FzZSBVUExPQURfUFJPR1JFU1M6XG4gICAgICBjb25zb2xlLmxvZygnaW4gY2FzZScpXG5cbiAgICAgIHJldHVybiBzdGF0ZS5tYXAoaSA9PlxuICAgICAgICBpLmZpbGUubmFtZSAhPT0gYWN0aW9uLmZpbGUubmFtZSA/IGkgOiBpdGVtKGksIGFjdGlvbilcbiAgICAgIClcbiAgICBkZWZhdWx0OlxuICAgICAgcmV0dXJuIHN0YXRlXG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgY29tYmluZVJlZHVjZXJzKHsgcXVldWUgfSlcblxuZXhwb3J0IGNvbnN0IHVwbG9hZFByb2dyZXNzID0gKGZpbGUsIGV2ZW50LCBkYXRlKSA9PiAoe1xuICB0eXBlOiBVUExPQURfUFJPR1JFU1MsXG4gIGZpbGUsXG4gIGxvYWRlZDogZXZlbnQubG9hZGVkLFxuICB0b3RhbDogZXZlbnQudG90YWwsXG4gIGRhdGU6IGRhdGUgfHwgRGF0ZS5ub3coKVxufSlcblxuZXhwb3J0IGNvbnN0IHByb2Nlc3NOZXh0RmlsZSA9IChcbiAgZmlsZVVwbG9hZGVkQ2FsbGJhY2ssXG4gIHF1ZXVlQ29tcGxldGVkQ2FsbGJhY2ssXG4gIGRpcklELFxuICBzaGFyaW5nU3RhdGUsXG4gIHsgY2xpZW50LCB2YXVsdENsaWVudCB9XG4pID0+IGFzeW5jIChkaXNwYXRjaCwgZ2V0U3RhdGUpID0+IHtcbiAgbGV0IGVycm9yID0gbnVsbFxuICBpZiAoIWNsaWVudCkge1xuICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICdVcGxvYWQgbW9kdWxlIG5lZWRzIGEgY296eS1jbGllbnQgaW5zdGFuY2UgdG8gd29yay4gVGhpcyBpbnN0YW5jZSBzaG91bGQgYmUgbWFkZSBhdmFpbGFibGUgYnkgdXNpbmcgdGhlIGV4dHJhQXJndW1lbnQgZnVuY3Rpb24gb2YgcmVkdXgtdGh1bmsnXG4gICAgKVxuICB9XG4gIGNvbnN0IGl0ZW0gPSBnZXRVcGxvYWRRdWV1ZShnZXRTdGF0ZSgpKS5maW5kKGkgPT4gaS5zdGF0dXMgPT09IFBFTkRJTkcpXG4gIGlmICghaXRlbSkge1xuICAgIHJldHVybiBkaXNwYXRjaChvblF1ZXVlRW1wdHkocXVldWVDb21wbGV0ZWRDYWxsYmFjaykpXG4gIH1cblxuICBjb25zdCB7IGZpbGUsIGVudHJ5LCBpc0RpcmVjdG9yeSB9ID0gaXRlbVxuICBjb25zdCBlbmNyeXB0aW9uS2V5ID0gYXdhaXQgZ2V0RW5jcnlwdGlvbktleUZyb21EaXJJZChjbGllbnQsIGRpcklEKVxuICB0cnkge1xuICAgIGRpc3BhdGNoKHsgdHlwZTogVVBMT0FEX0ZJTEUsIGZpbGUgfSlcbiAgICBpZiAoZW50cnkgJiYgaXNEaXJlY3RvcnkpIHtcbiAgICAgIGNvbnN0IG5ld0RpciA9IGF3YWl0IHVwbG9hZERpcmVjdG9yeShjbGllbnQsIGVudHJ5LCBkaXJJRCwge1xuICAgICAgICB2YXVsdENsaWVudCxcbiAgICAgICAgZW5jcnlwdGlvbktleVxuICAgICAgfSlcbiAgICAgIGZpbGVVcGxvYWRlZENhbGxiYWNrKG5ld0RpcilcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3Qgd2l0aFByb2dyZXNzID0ge1xuICAgICAgICBvblVwbG9hZFByb2dyZXNzOiBldmVudCA9PiB7XG4gICAgICAgICAgZGlzcGF0Y2godXBsb2FkUHJvZ3Jlc3MoZmlsZSwgZXZlbnQpKVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHVwbG9hZGVkRmlsZSA9IGF3YWl0IHVwbG9hZEZpbGUoY2xpZW50LCBmaWxlLCBkaXJJRCwge1xuICAgICAgICB2YXVsdENsaWVudCxcbiAgICAgICAgZW5jcnlwdGlvbktleSxcbiAgICAgICAgLi4ud2l0aFByb2dyZXNzXG4gICAgICB9KVxuXG4gICAgICBmaWxlVXBsb2FkZWRDYWxsYmFjayh1cGxvYWRlZEZpbGUpXG4gICAgfVxuICAgIGRpc3BhdGNoKHsgdHlwZTogUkVDRUlWRV9VUExPQURfU1VDQ0VTUywgZmlsZSB9KVxuICB9IGNhdGNoICh1cGxvYWRFcnJvcikge1xuICAgIGVycm9yID0gdXBsb2FkRXJyb3JcbiAgICBpZiAodXBsb2FkRXJyb3Iuc3RhdHVzID09PSBDT05GTElDVF9FUlJPUikge1xuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgcGF0aCA9IGF3YWl0IENvenlGaWxlLmdldEZ1bGxwYXRoKGRpcklELCBmaWxlLm5hbWUpXG4gICAgICAgIGNvbnN0IHVwbG9hZGVkRmlsZSA9IGF3YWl0IG92ZXJ3cml0ZUZpbGUoY2xpZW50LCBmaWxlLCBwYXRoLCB7XG4gICAgICAgICAgb25VcGxvYWRQcm9ncmVzczogZXZlbnQgPT4ge1xuICAgICAgICAgICAgZGlzcGF0Y2godXBsb2FkUHJvZ3Jlc3MoZmlsZSwgZXZlbnQpKVxuICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICAgICAgZmlsZVVwbG9hZGVkQ2FsbGJhY2sodXBsb2FkZWRGaWxlKVxuICAgICAgICBkaXNwYXRjaCh7IHR5cGU6IFJFQ0VJVkVfVVBMT0FEX1NVQ0NFU1MsIGZpbGUsIGlzVXBkYXRlOiB0cnVlIH0pXG4gICAgICAgIGVycm9yID0gbnVsbFxuICAgICAgfSBjYXRjaCAodXBkYXRlRXJyb3IpIHtcbiAgICAgICAgZXJyb3IgPSB1cGRhdGVFcnJvclxuICAgICAgfVxuICAgIH1cbiAgICBpZiAoZXJyb3IpIHtcbiAgICAgIGxvZ2dlci53YXJuKGVycm9yKVxuICAgICAgbG9nRXhjZXB0aW9uKFxuICAgICAgICBgVXBsb2FkIG1vZHVsZSBjYXRjaGVzIGFuIGVycm9yIHdoZW4gZXhlY3V0aW5nIHByb2Nlc3NOZXh0RmlsZSgpOiAke2Vycm9yfWBcbiAgICAgIClcbiAgICAgIGNvbnN0IHN0YXR1c0Vycm9yID0ge1xuICAgICAgICA0MDk6IENPTkZMSUNULFxuICAgICAgICA0MTM6IFFVT1RBXG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHN0YXR1cyA9XG4gICAgICAgIHN0YXR1c0Vycm9yW2Vycm9yLnN0YXR1c10gfHxcbiAgICAgICAgKC9GYWlsZWQgdG8gZmV0Y2gkLy5leGVjKGVycm9yLnRvU3RyaW5nKCkpICYmIE5FVFdPUkspIHx8XG4gICAgICAgIEZBSUxFRFxuXG4gICAgICBkaXNwYXRjaCh7IHR5cGU6IFJFQ0VJVkVfVVBMT0FEX0VSUk9SLCBmaWxlLCBzdGF0dXMgfSlcbiAgICB9XG4gIH1cbiAgZGlzcGF0Y2goXG4gICAgcHJvY2Vzc05leHRGaWxlKFxuICAgICAgZmlsZVVwbG9hZGVkQ2FsbGJhY2ssXG4gICAgICBxdWV1ZUNvbXBsZXRlZENhbGxiYWNrLFxuICAgICAgZGlySUQsXG4gICAgICBzaGFyaW5nU3RhdGUsXG4gICAgICB7IGNsaWVudCwgdmF1bHRDbGllbnQgfVxuICAgIClcbiAgKVxufVxuXG5jb25zdCBnZXRGaWxlRnJvbUVudHJ5ID0gZW50cnkgPT4gbmV3IFByb21pc2UocmVzb2x2ZSA9PiBlbnRyeS5maWxlKHJlc29sdmUpKVxuXG5jb25zdCB1cGxvYWREaXJlY3RvcnkgPSBhc3luYyAoXG4gIGNsaWVudCxcbiAgZGlyZWN0b3J5LFxuICBkaXJJRCxcbiAgeyB2YXVsdENsaWVudCwgZW5jcnlwdGlvbktleSB9XG4pID0+IHtcbiAgY29uc3QgbmV3RGlyID0gYXdhaXQgY3JlYXRlRm9sZGVyKGNsaWVudCwgZGlyZWN0b3J5Lm5hbWUsIGRpcklEKVxuICBjb25zdCBkaXJSZWFkZXIgPSBkaXJlY3RvcnkuY3JlYXRlUmVhZGVyKClcbiAgcmV0dXJuIG5ldyBQcm9taXNlKHJlc29sdmUgPT4ge1xuICAgIGNvbnN0IGVudHJpZXNSZWFkZXIgPSBhc3luYyBlbnRyaWVzID0+IHtcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZW50cmllcy5sZW5ndGg7IGkgKz0gMSkge1xuICAgICAgICBjb25zdCBlbnRyeSA9IGVudHJpZXNbaV1cbiAgICAgICAgaWYgKGVudHJ5LmlzRmlsZSkge1xuICAgICAgICAgIGNvbnN0IGZpbGUgPSBhd2FpdCBnZXRGaWxlRnJvbUVudHJ5KGVudHJ5KVxuICAgICAgICAgIGF3YWl0IHVwbG9hZEZpbGUoY2xpZW50LCBmaWxlLCBuZXdEaXIuaWQsIHtcbiAgICAgICAgICAgIHZhdWx0Q2xpZW50LFxuICAgICAgICAgICAgZW5jcnlwdGlvbktleVxuICAgICAgICAgIH0pXG4gICAgICAgIH0gZWxzZSBpZiAoZW50cnkuaXNEaXJlY3RvcnkpIHtcbiAgICAgICAgICBhd2FpdCB1cGxvYWREaXJlY3RvcnkoY2xpZW50LCBlbnRyeSwgbmV3RGlyLmlkLCB7XG4gICAgICAgICAgICB2YXVsdENsaWVudCxcbiAgICAgICAgICAgIGVuY3J5cHRpb25LZXlcbiAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXNvbHZlKG5ld0RpcilcbiAgICB9XG4gICAgZGlyUmVhZGVyLnJlYWRFbnRyaWVzKGVudHJpZXNSZWFkZXIpXG4gIH0pXG59XG5cbmNvbnN0IGNyZWF0ZUZvbGRlciA9IGFzeW5jIChjbGllbnQsIG5hbWUsIGRpcklEKSA9PiB7XG4gIGNvbnN0IHJlc3AgPSBhd2FpdCBjbGllbnRcbiAgICAuY29sbGVjdGlvbihET0NUWVBFX0ZJTEVTKVxuICAgIC5jcmVhdGVEaXJlY3RvcnkoeyBuYW1lLCBkaXJJZDogZGlySUQgfSlcbiAgcmV0dXJuIHJlc3AuZGF0YVxufVxuXG5jb25zdCB1cGxvYWRGaWxlID0gYXN5bmMgKGNsaWVudCwgZmlsZSwgZGlySUQsIG9wdGlvbnMgPSB7fSkgPT4ge1xuICAvKiogV2UgaGF2ZSBhIGJ1ZyB3aXRoIENocm9tZSByZXR1cm5pbmcgU1BEWV9FUlJPUl9QUk9UT0NPTC5cbiAgICogVGhpcyBpcyBjZXJ0YWlubHkgY2F1c2VkIGJ5IHRoZSBjb3VwbGUgSFRUUDIgLyBIQVByb3h5IC8gQ296eVN0YWNrXG4gICAqIHdoZW4gc29tZXRoaW5nIGN1dCB0aGUgSFRUUCBjb25uZXhpb24gYmVmb3JlIHRoZSBTdGFja1xuICAgKlxuICAgKiBXZSBjYW4gbm90IGludGVyY2VwdCB0aGlzIGVycm9yIHNpbmNlIENocm9tZSBvbmx5IHJldHVybnNcbiAgICogYEZhaWxlZCB0byBmZXRjaGAgYXMgaWYgd2Ugd2VyZSBvZmZsaW5lLiBUaGUgb25seSB3b3JrYXJvdW5kIGZvclxuICAgKiBub3csIGlzIHRvIGNoZWNrIGlmIHdlJ2xsIGhhdmUgZW5vdWdoIHNpemUgb24gdGhlIENvenkgYmVmb3JlXG4gICAqIHRyeWluZyB0byB1cGxvYWQgdGhlIGZpbGUgdG8gZGV0ZWN0IGlmIHdlJ2xsIGdvIG91dCBvZiBxdW90YVxuICAgKiBiZWZvcmUgY29ubmV4aW9uIGJlaW5nIGN1dCBieSBzb21ldGhpbmcuXG4gICAqXG4gICAqIFdlIGRvbid0IG5lZWQgdG8gZG8gdGhhdCB3b3JrIG9uIG90aGVyIGJyb3dzZXIgKHdpbmRvdy5jaHJvbWVcbiAgICogc2hvdWxkIGJlIGF2YWlsYWJsZSBvbiBuZXcgRWRnZSwgQ2hyb21lLCBDaHJvbWl1bSwgQnJhdmUsIE9wZXJhLi4uKVxuICAgKi9cbiAgaWYgKHdpbmRvdy5jaHJvbWUpIHtcbiAgICBjb25zdCB7IGRhdGE6IGRpc2tVc2FnZSB9ID0gYXdhaXQgY2xpZW50XG4gICAgICAuZ2V0U3RhY2tDbGllbnQoKVxuICAgICAgLmZldGNoSlNPTignR0VUJywgJy9zZXR0aW5ncy9kaXNrLXVzYWdlJylcbiAgICBpZiAoZGlza1VzYWdlLmF0dHJpYnV0ZXMucXVvdGEpIHtcbiAgICAgIGlmIChcbiAgICAgICAgcGFyc2VJbnQoZGlza1VzYWdlLmF0dHJpYnV0ZXMudXNlZCkgKyBwYXJzZUludChmaWxlLnNpemUpID5cbiAgICAgICAgcGFyc2VJbnQoZGlza1VzYWdlLmF0dHJpYnV0ZXMucXVvdGEpXG4gICAgICApIHtcbiAgICAgICAgY29uc3QgZXJyb3IgPSBuZXcgRXJyb3IoJ1BheWxvYWQgVG9vIExhcmdlJylcbiAgICAgICAgZXJyb3Iuc3RhdHVzID0gNDEzXG4gICAgICAgIHRocm93IGVycm9yXG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgY29uc3QgeyBvblVwbG9hZFByb2dyZXNzLCBlbmNyeXB0aW9uS2V5LCB2YXVsdENsaWVudCB9ID0gb3B0aW9uc1xuXG4gIGlmIChlbmNyeXB0aW9uS2V5ICYmIHZhdWx0Q2xpZW50KSB7XG4gICAgLy8gVE9ETzogdXNlIHdlYiB3b3JrZXJcbiAgICBjb25zdCBmciA9IG5ldyBGaWxlUmVhZGVyKClcbiAgICBmci5vbmxvYWRlbmQgPSBhc3luYyAoKSA9PiB7XG4gICAgICByZXR1cm4gZW5jcnlwdEFuZFVwbG9hZE5ld0ZpbGUoY2xpZW50LCB2YXVsdENsaWVudCwge1xuICAgICAgICBmaWxlOiBmci5yZXN1bHQsXG4gICAgICAgIGVuY3J5cHRpb25LZXksXG4gICAgICAgIGZpbGVPcHRpb25zOiB7XG4gICAgICAgICAgbmFtZTogZmlsZS5uYW1lLFxuICAgICAgICAgIGRpcklELFxuICAgICAgICAgIG9uVXBsb2FkUHJvZ3Jlc3NcbiAgICAgICAgfVxuICAgICAgfSlcbiAgICB9XG4gICAgZnIucmVhZEFzQXJyYXlCdWZmZXIoZmlsZSlcbiAgfSBlbHNlIHtcbiAgICBjb25zdCByZXNwID0gYXdhaXQgY2xpZW50XG4gICAgICAuY29sbGVjdGlvbihET0NUWVBFX0ZJTEVTKVxuICAgICAgLmNyZWF0ZUZpbGUoZmlsZSwgeyBkaXJJZDogZGlySUQsIG9uVXBsb2FkUHJvZ3Jlc3MgfSlcblxuICAgIHJldHVybiByZXNwLmRhdGFcbiAgfVxufVxuXG4vKlxuICogQGZ1bmN0aW9uXG4gKiBAcGFyYW0ge09iamVjdH0gY2xpZW50IC0gQSBDb3p5Q2xpZW50IGluc3RhbmNlXG4gKiBAcGFyYW0ge09iamVjdH0gZmlsZSAtIFRoZSB1cGxvYWRlZCBqYXZhc2NyaXB0IEZpbGUgb2JqZWN0XG4gKiBAcGFyYW0ge3N0cmluZ30gcGF0aCAtIFRoZSBmaWxlJ3MgcGF0aCBpbiB0aGUgY296eVxuICogQHBhcmFtIHt7b25VcGxvYWRQcm9ncmVzc319IG9wdGlvbnNcbiAqIEByZXR1cm4ge09iamVjdH0gLSBUaGUgdXBkYXRlZCBpby5jb3p5LmZpbGVzXG4gKi9cbmV4cG9ydCBjb25zdCBvdmVyd3JpdGVGaWxlID0gYXN5bmMgKGNsaWVudCwgZmlsZSwgcGF0aCwgb3B0aW9ucyA9IHt9KSA9PiB7XG4gIGNvbnN0IHN0YXRSZXNwID0gYXdhaXQgY2xpZW50LmNvbGxlY3Rpb24oRE9DVFlQRV9GSUxFUykuc3RhdEJ5UGF0aChwYXRoKVxuICBjb25zdCB7IGlkOiBmaWxlSWQsIGRpcl9pZDogZGlySWQgfSA9IHN0YXRSZXNwLmRhdGFcbiAgY29uc3QgcmVzcCA9IGF3YWl0IGNsaWVudFxuICAgIC5jb2xsZWN0aW9uKERPQ1RZUEVfRklMRVMpXG4gICAgLnVwZGF0ZUZpbGUoZmlsZSwgeyBkaXJJZCwgZmlsZUlkLCBvcHRpb25zIH0pXG5cbiAgcmV0dXJuIHJlc3AuZGF0YVxufVxuXG5leHBvcnQgY29uc3QgdXBsb2FkRmlsZXNGcm9tTmF0aXZlID0gKFxuICBmaWxlcyxcbiAgZm9sZGVySWQsXG4gIHVwbG9hZEZpbGVzU3VjY2Vzc0NhbGxiYWNrLFxuICB7IGNsaWVudCwgdmF1bHRDbGllbnQgfVxuKSA9PiBhc3luYyBkaXNwYXRjaCA9PiB7XG4gIGRpc3BhdGNoKHtcbiAgICB0eXBlOiBBRERfVE9fVVBMT0FEX1FVRVVFLFxuICAgIGZpbGVzOiBmaWxlc1xuICB9KVxuICBjb25zdCBlbmNyeXB0aW9uS2V5ID0gYXdhaXQgZ2V0RW5jcnlwdGlvbktleUZyb21EaXJJZChjbGllbnQsIGZvbGRlcklkKVxuICAvLyAhVE9ETyBQcm9taXNlLkFsbCB0byB1c2UgcGFyYWxsZWxpemF0aW9uXG4gIGZvciAoY29uc3QgZmlsZSBvZiBmaWxlcykge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBmaWxlT3B0cyA9IHtcbiAgICAgICAgbmFtZTogZmlsZS5maWxlLm5hbWUsXG4gICAgICAgIGRpcklkOiBmb2xkZXJJZCxcbiAgICAgICAgY29uZmxpY3RTdHJhdGVneTogJ3JlbmFtZSdcbiAgICAgIH1cbiAgICAgIGlmIChlbmNyeXB0aW9uS2V5KSB7XG4gICAgICAgIGNvbnN0IGJsb2JGaWxlID0gYXdhaXQgcmVhZE1vYmlsZUZpbGUoZmlsZS5maWxlLmZpbGVVcmwpXG4gICAgICAgIGNvbnN0IGVuY3J5cHRlZEZpbGUgPSBhd2FpdCB2YXVsdENsaWVudC5lbmNyeXB0RmlsZShcbiAgICAgICAgICBibG9iRmlsZSxcbiAgICAgICAgICBlbmNyeXB0aW9uS2V5XG4gICAgICAgIClcbiAgICAgICAgYXdhaXQgdXBsb2FkRmlsZVdpdGhDb25mbGljdFN0cmF0ZWd5KGNsaWVudCwgZW5jcnlwdGVkRmlsZSwge1xuICAgICAgICAgIC4uLmZpbGVPcHRzLFxuICAgICAgICAgIGNvbnRlbnRUeXBlOiBFTkNSWVBUSU9OX01JTUVfVFlQRVxuICAgICAgICB9KVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgYXdhaXQgZG9Nb2JpbGVVcGxvYWQoY2xpZW50LCBmaWxlLmZpbGUuZmlsZVVybCwge1xuICAgICAgICAgIC4uLmZpbGVPcHRzLFxuICAgICAgICAgIGNvbnRlbnRUeXBlOiBmaWxlLmZpbGUudHlwZVxuICAgICAgICB9KVxuICAgICAgfVxuICAgICAgZGlzcGF0Y2gocmVtb3ZlRmlsZVRvVXBsb2FkUXVldWUoZmlsZS5maWxlKSlcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgbG9nZ2VyLmVycm9yKFxuICAgICAgICBgVXBsb2FkaW5nIGZpbGVzIGZyb20gbmF0aXZlIGZhaWxlZCB3aXRoIGZpbGUgJHtmaWxlLmZpbGV9OiAke2Vycm9yfWBcbiAgICAgIClcbiAgICB9XG4gIH1cblxuICBpZiAodXBsb2FkRmlsZXNTdWNjZXNzQ2FsbGJhY2spIHVwbG9hZEZpbGVzU3VjY2Vzc0NhbGxiYWNrKClcbn1cblxuZXhwb3J0IGNvbnN0IHJlbW92ZUZpbGVUb1VwbG9hZFF1ZXVlID0gZmlsZSA9PiBhc3luYyBkaXNwYXRjaCA9PiB7XG4gIGRpc3BhdGNoKHsgdHlwZTogUkVDRUlWRV9VUExPQURfU1VDQ0VTUywgZmlsZSwgaXNVcGRhdGU6IHRydWUgfSlcbn1cblxuZXhwb3J0IGNvbnN0IGFkZFRvVXBsb2FkUXVldWUgPSAoXG4gIGZpbGVzLFxuICBkaXJJRCxcbiAgc2hhcmluZ1N0YXRlLFxuICBmaWxlVXBsb2FkZWRDYWxsYmFjayxcbiAgcXVldWVDb21wbGV0ZWRDYWxsYmFjayxcbiAgeyBjbGllbnQsIHZhdWx0Q2xpZW50IH1cbikgPT4gYXN5bmMgZGlzcGF0Y2ggPT4ge1xuICBkaXNwYXRjaCh7XG4gICAgdHlwZTogQUREX1RPX1VQTE9BRF9RVUVVRSxcbiAgICBmaWxlczogZXh0cmFjdEZpbGVzRW50cmllcyhmaWxlcylcbiAgfSlcbiAgZGlzcGF0Y2goXG4gICAgcHJvY2Vzc05leHRGaWxlKFxuICAgICAgZmlsZVVwbG9hZGVkQ2FsbGJhY2ssXG4gICAgICBxdWV1ZUNvbXBsZXRlZENhbGxiYWNrLFxuICAgICAgZGlySUQsXG4gICAgICBzaGFyaW5nU3RhdGUsXG4gICAgICB7IGNsaWVudCwgdmF1bHRDbGllbnQgfVxuICAgIClcbiAgKVxufVxuXG5leHBvcnQgY29uc3QgcHVyZ2VVcGxvYWRRdWV1ZSA9ICgpID0+ICh7IHR5cGU6IFBVUkdFX1VQTE9BRF9RVUVVRSB9KVxuXG5leHBvcnQgY29uc3Qgb25RdWV1ZUVtcHR5ID0gY2FsbGJhY2sgPT4gKGRpc3BhdGNoLCBnZXRTdGF0ZSkgPT4ge1xuICBjb25zdCBxdWV1ZSA9IGdldFVwbG9hZFF1ZXVlKGdldFN0YXRlKCkpXG4gIGNvbnN0IHF1b3RhcyA9IGdldFF1b3RhRXJyb3JzKHF1ZXVlKVxuICBjb25zdCBjb25mbGljdHMgPSBnZXRDb25mbGljdHMocXVldWUpXG4gIGNvbnN0IGNyZWF0ZWQgPSBnZXRDcmVhdGVkKHF1ZXVlKVxuICBjb25zdCB1cGRhdGVkID0gZ2V0VXBkYXRlZChxdWV1ZSlcbiAgY29uc3QgbmV0d29ya0Vycm9ycyA9IGdldE5ldHdvcmtFcnJvcnMocXVldWUpXG4gIGNvbnN0IGVycm9ycyA9IGdldEVycm9ycyhxdWV1ZSlcblxuICByZXR1cm4gY2FsbGJhY2soY3JlYXRlZCwgcXVvdGFzLCBjb25mbGljdHMsIG5ldHdvcmtFcnJvcnMsIGVycm9ycywgdXBkYXRlZClcbn1cblxuLy8gc2VsZWN0b3JzXG5jb25zdCBmaWx0ZXJCeVN0YXR1cyA9IChxdWV1ZSwgc3RhdHVzKSA9PiBxdWV1ZS5maWx0ZXIoZiA9PiBmLnN0YXR1cyA9PT0gc3RhdHVzKVxuY29uc3QgZ2V0Q29uZmxpY3RzID0gcXVldWUgPT4gZmlsdGVyQnlTdGF0dXMocXVldWUsIENPTkZMSUNUKVxuY29uc3QgZ2V0RXJyb3JzID0gcXVldWUgPT4gZmlsdGVyQnlTdGF0dXMocXVldWUsIEZBSUxFRClcbmNvbnN0IGdldFF1b3RhRXJyb3JzID0gcXVldWUgPT4gZmlsdGVyQnlTdGF0dXMocXVldWUsIFFVT1RBKVxuY29uc3QgZ2V0TmV0d29ya0Vycm9ycyA9IHF1ZXVlID0+IGZpbHRlckJ5U3RhdHVzKHF1ZXVlLCBORVRXT1JLKVxuY29uc3QgZ2V0Q3JlYXRlZCA9IHF1ZXVlID0+IGZpbHRlckJ5U3RhdHVzKHF1ZXVlLCBDUkVBVEVEKVxuY29uc3QgZ2V0VXBkYXRlZCA9IHF1ZXVlID0+IGZpbHRlckJ5U3RhdHVzKHF1ZXVlLCBVUERBVEVEKVxuXG5leHBvcnQgY29uc3QgZ2V0VXBsb2FkUXVldWUgPSBzdGF0ZSA9PiBzdGF0ZVtTTFVHXS5xdWV1ZVxuXG5leHBvcnQgY29uc3QgZ2V0UHJvY2Vzc2VkID0gc3RhdGUgPT5cbiAgZ2V0VXBsb2FkUXVldWUoc3RhdGUpLmZpbHRlcihmID0+IGYuc3RhdHVzICE9PSBQRU5ESU5HKVxuXG5leHBvcnQgY29uc3QgZ2V0U3VjY2Vzc2Z1bCA9IHN0YXRlID0+IHtcbiAgY29uc3QgcXVldWUgPSBnZXRVcGxvYWRRdWV1ZShzdGF0ZSlcbiAgcmV0dXJuIHF1ZXVlLmZpbHRlcihmID0+IFtDUkVBVEVELCBVUERBVEVEXS5pbmNsdWRlcyhmLnN0YXR1cykpXG59XG5cbmV4cG9ydCBjb25zdCBzZWxlY3RvcnMgPSB7XG4gIGdldENvbmZsaWN0cyxcbiAgZ2V0RXJyb3JzLFxuICBnZXRRdW90YUVycm9ycyxcbiAgZ2V0TmV0d29ya0Vycm9ycyxcbiAgZ2V0Q3JlYXRlZCxcbiAgZ2V0VXBkYXRlZCxcbiAgZ2V0UHJvY2Vzc2VkLFxuICBnZXRTdWNjZXNzZnVsXG59XG5cbi8vIERPTSBoZWxwZXJzXG5jb25zdCBleHRyYWN0RmlsZXNFbnRyaWVzID0gaXRlbXMgPT4ge1xuICBsZXQgcmVzdWx0cyA9IFtdXG4gIGZvciAobGV0IGkgPSAwOyBpIDwgaXRlbXMubGVuZ3RoOyBpICs9IDEpIHtcbiAgICBjb25zdCBpdGVtID0gaXRlbXNbaV1cbiAgICBpZiAoaXRlbS53ZWJraXRHZXRBc0VudHJ5ICE9IG51bGwgJiYgaXRlbS53ZWJraXRHZXRBc0VudHJ5KCkpIHtcbiAgICAgIGNvbnN0IGVudHJ5ID0gaXRlbS53ZWJraXRHZXRBc0VudHJ5KClcbiAgICAgIHJlc3VsdHMucHVzaCh7XG4gICAgICAgIGZpbGU6IGl0ZW0uZ2V0QXNGaWxlKCksXG4gICAgICAgIGlzRGlyZWN0b3J5OiBlbnRyeS5pc0RpcmVjdG9yeSA9PT0gdHJ1ZSxcbiAgICAgICAgZW50cnlcbiAgICAgIH0pXG4gICAgfSBlbHNlIHtcbiAgICAgIHJlc3VsdHMucHVzaCh7IGZpbGU6IGl0ZW0sIGlzRGlyZWN0b3J5OiBmYWxzZSwgZW50cnk6IG51bGwgfSlcbiAgICB9XG4gIH1cblxuICBpZiAocmVzdWx0cy5sZW5ndGggPT09IDApIHtcbiAgICBsb2dnZXIud2FybignVXBsb2FkIG1vZHVsZSBmaWxlcyBlbnRyaWVzIGV4dHJhY3Rpb246IG5vIGZpbGUgZW50cnknKVxuICB9XG5cbiAgcmV0dXJuIHJlc3VsdHNcbn1cbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUlBO0FBRUE7QUFLQTtBQUhBO0FBQ0E7QUFDQTtBQUdBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBWEE7QUFjQTtBQUNBO0FBQ0E7QUFBQTtBQUVBO0FBQ0E7QUFIQTtBQUFBO0FBQ0E7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQVJBO0FBVUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUxBO0FBT0E7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBRUE7QUFDQTtBQUhBO0FBQUE7QUFDQTtBQUtBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQUE7QUFBQTtBQUNBO0FBRUE7QUFDQTtBQWxCQTtBQW9CQTtBQUVBO0FBQUE7QUFBQTtBQUVBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTEE7QUFBQTtBQVFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFNQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBRkE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQ0E7QUFEQTtBQU9BO0FBQUE7QUFBQTtBQUNBO0FBUkE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQ0E7QUFEQTtBQVlBO0FBWkE7QUFBQTtBQUNBO0FBREE7QUFhQTtBQWJBO0FBZUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQWhCQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQWtCQTtBQUNBO0FBRkE7QUFDQTtBQWxCQTtBQWlCQTtBQUlBO0FBckJBO0FBQUE7QUFDQTtBQURBO0FBdUJBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUF2QkE7QUFBQTtBQThCQTtBQUNBO0FBRkE7QUFDQTtBQTlCQTtBQTZCQTtBQU1BO0FBQ0E7QUFwQ0E7QUFxQ0E7QUFBQTtBQUFBO0FBQUE7QUFyQ0E7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBdUNBO0FBQ0E7QUF4Q0E7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUEwQ0E7QUExQ0E7QUFBQTtBQTRDQTtBQUNBO0FBQ0E7QUFIQTtBQUNBO0FBNUNBO0FBMkNBO0FBS0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFsREE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBb0RBO0FBQ0E7QUFyREE7QUF1REE7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBRkE7QUFLQTtBQUtBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBeEVBO0FBeUVBO0FBTUE7QUFBQTtBQUFBO0FBQ0E7QUFoRkE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQVBBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQXlGQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUlBO0FBSkE7QUFBQTtBQUNBO0FBREE7QUFNQTtBQUNBO0FBUEE7QUFTQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFGQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFDQTtBQURBO0FBSUE7QUFKQTtBQUFBO0FBTUE7QUFDQTtBQUZBO0FBQ0E7QUFOQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFXQTtBQUNBO0FBRkE7QUFDQTtBQVhBO0FBQ0E7QUFEQTtBQUFBO0FBQ0E7QUFEQTtBQWdCQTtBQUNBO0FBakJBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBaUJBO0FBQ0E7QUFDQTtBQTdCQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQThCQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFHQTtBQUFBO0FBQUE7QUFDQTtBQUpBO0FBQ0E7QUFEQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFNQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBZUE7QUFDQTtBQWhCQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQXNCQTtBQUNBO0FBeEJBO0FBQ0E7QUFEQTtBQThCQTtBQUNBO0FBL0JBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFnQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBSEE7QUFDQTtBQUZBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBV0E7QUE5Q0E7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBa0RBO0FBQUE7QUFBQTtBQUNBO0FBbkRBO0FBZ0RBO0FBaERBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQUE7QUF3REE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBS0E7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQU5BO0FBR0E7QUFIQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUFBO0FBVUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUtBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBREE7QUFBQTtBQUNBO0FBREE7QUFLQTtBQUNBO0FBTkE7QUFBQTtBQUNBO0FBREE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQU1BO0FBUEE7QUFTQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBQ0E7QUFWQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUNBO0FBREE7QUFlQTtBQWZBO0FBQUE7QUFDQTtBQURBO0FBZ0JBO0FBaEJBO0FBQUE7QUFzQkE7QUFGQTtBQUNBO0FBckJBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBMkJBO0FBRkE7QUFDQTtBQTFCQTtBQThCQTtBQTlCQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFnQ0E7QUFDQTtBQWpDQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUNBO0FBREE7QUFBQTtBQUNBO0FBREE7QUFDQTtBQURBO0FBQ0E7QUFEQTtBQXNDQTtBQUNBO0FBdkNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFOQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBOENBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBRkE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFJQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBT0E7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBTUE7QUFBQTtBQUFBO0FBQ0E7QUFaQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBUkE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQXVCQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBRUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQVZBO0FBQ0E7QUFZQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFFQTtBQUFBO0FBQ0E7QUFBQTtBQURBO0FBR0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBUkE7QUFDQTtBQVdBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFLQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/drive/web/modules/upload/index.js\n");

/***/ })

})